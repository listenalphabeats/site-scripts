var F=(e=>(e.RewardfulReferral="rewardful.referral",e))(F||{});function safeDecodeURIComponent(e){return q(e)?decodeURIComponent(e):e}function q(e){try{const t=decodeURIComponent(e);return encodeURIComponent(t)!==e}catch{return!1}}function getCookie(e){e+="=";const i=document.cookie.split(";").find(s=>s.trim().substring(0,e.length)===e);return i?JSON.parse(safeDecodeURIComponent(i.trim().substring(e.length))):null}const NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID="newsletterDiscountParams";function getNewsletterDiscountParams(){return localStorage.getItem(NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID)}function isGooglebot(){return/Googlebot/.test(window.navigator.userAgent)}function runAfterConsentResolved({callback:e,fallback:t,timeout:i=18e3}){const o=Date.now(),s=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(s),window.FsCC.store.confirmed){e();return}const c=()=>{var d;(d=window.FsCC)!=null&&d.store.confirmed&&(clearTimeout(n),e())},n=setTimeout(()=>{var d,h;(h=(d=window.FsCC)==null?void 0:d.consentController)==null||h.off("updateconsents",c),t()},i);window.FsCC.consentController.on("updateconsents",c)}else Date.now()-o>=i&&(clearInterval(s),t())},500)}function runWhenAvailable(e,t,i=100,o=4e3){const s=Date.now();function c(){typeof window[e]=="function"?t():Date.now()-s<o?setTimeout(c,i):console.error(`${e} is not available after ${o}ms`)}c()}function runWhenPostHogIsReady({getFeatureFlag:e,callback:t,fallback:i,timeout:o=2e3}){const s=Date.now(),c=setInterval(()=>{e()!==void 0?(clearInterval(c),t()):Date.now()-s>=o&&(clearInterval(c),i())},500)}function guardCioFormsWithRecaptcha(){const e=window.location.host==="staging-alphabeats.webflow.io",t=e?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",i=e?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.nl/v1/forms",o=document.createElement("script");o.async=!0,o.src=`https://www.google.com/recaptcha/enterprise.js?render=${t}`,document.head.appendChild(o);function s(){const a=document.querySelector(".grecaptcha-badge");a&&(a.style.right="-100%",setTimeout(()=>{a.style.visibility="visible"},400))}function c(a){const u=document.querySelector(".grecaptcha-badge");u&&(console.debug("badge:",u),u.style.right={visible:"-186px",hidden:"-100%"}[a])}let n=!1;function d(){n=!1,c("hidden")}async function h(a){var S,I;const u=a.target,w=u.dataset.cioFormId;function y(){a.preventDefault(),a.stopPropagation()}if(n||!u.checkValidity()||!w)return;y();const l=(S=window.grecaptcha)==null?void 0:S.enterprise;if(!(l!=null&&l.execute)){(I=window.Sentry)==null||I.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}n=!0;const r=Object.fromEntries(new FormData(u)),b=Object.keys(r).filter(g=>g.includes("email"));b.length&&b.forEach(g=>r[g]=String(r[g]).toLowerCase()),l.ready(()=>{l.execute(t,{action:"submit"}).then(E=>{const T={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:r,recaptchaToken:E})};return fetch(`${i}/${w}/submit`,T)}).then(()=>{d()}).catch(E=>{var m;(m=window.Sentry)==null||m.captureException(E),d()});const g=u.querySelector('input[type="submit"]');g?g.click():u.submit()})}document.addEventListener("submit",a=>{h(a),d()}),window.addEventListener("load",function(){s(),[...document.forms].forEach(a=>{a.addEventListener("submit",u=>{h(u)}),a.dataset.cioFormId&&(a.addEventListener("focusin",()=>{c("visible")}),a.addEventListener("focusout",()=>setTimeout(()=>c("hidden"),4e3)))})})}function handleNewsletterDiscountPopup(){var I,g,E;const e="couponId=FjYlGRQJ&amountOff=25&discountName=$25 Newsletter Discount",t="discount-modal-a",i="discount-modal-background-a",o="discount-modal-close-button-a",s="discount-form-a",c="formSubmittedAt",n="formDismissedAt";function d(m){const T={show:"flex",hide:"none"}[m],v=document.getElementById(t);v&&(v.style.display=T)}function h(){d("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function a(){d("hide")}function u(){localStorage.setItem(c,String(new Date().getTime())),localStorage.setItem(NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID,e);const m=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");m&&(m.removeAttribute("href"),m.addEventListener("click",a))}function w(){localStorage.setItem(n,String(new Date().getTime())),a()}if(isGooglebot()||!["/","/product","/shop"].includes(window.location.pathname)||getCookie(F.RewardfulReferral)||localStorage.getItem(c))return;const y=localStorage.getItem(n);if(y&&new Date().getTime()-Number(y)<24*60*60*1e3)return;const l=4e3;function r(){var m;return(m=window.posthog)==null?void 0:m.getFeatureFlag("newsletter-discount-popup-timeout-2")}function b(){const m=r()==="test-15sec-delay"?15e3:l;setTimeout(h,m)}function S(){setTimeout(h,l)}runWhenPostHogIsReady({getFeatureFlag:r,callback:b,fallback:S}),(I=document.getElementById(s))==null||I.addEventListener("submit",u),(g=document.getElementById(o))==null||g.addEventListener("click",w),(E=document.getElementById(i))==null||E.addEventListener("click",w)}function conditionalCookieBanner(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",t.setAttribute("fs-cc-domain",".listenalphabeats.com"),t.setAttribute("fs-cc-mode","opt-in"),t.async=!0;const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",i.async=!0,document.head.appendChild(t),document.head.appendChild(i)}function handleDiscount(){setTimeout(()=>J(),400)}function J(){var R,x,k,O;const e=document.getElementById("title-price"),t=document.getElementById("discount-badge"),i=document.getElementById("discount-badge-title"),o=e==null?void 0:e.querySelector("span"),s=document.getElementById("title-price-mob"),c=s==null?void 0:s.querySelector("span"),n=document.getElementById("year-bundle-price"),d=document.getElementById("month-bundle-price");function h(){var P,A,_,N,$;const f=parseFloat(((P=o==null?void 0:o.textContent)==null?void 0:P.replace("$",""))||"689"),p=parseFloat(((_=(A=e==null?void 0:e.childNodes)==null?void 0:A[1].nodeValue)==null?void 0:_.trim().replace("$",""))||"499"),L=parseFloat(((N=n==null?void 0:n.textContent)==null?void 0:N.split("$")[1])||"499"),C=parseFloat((($=d==null?void 0:d.textContent)==null?void 0:$.split("$")[1])||"365.99");return{titleStrikedPrice:f,titleCurrentPrice:p,yearBundlePrice:L,monthBundlePrice:C}}function a(f,p,L){if(L){const C=L.textContent;C&&(L.innerHTML=C.replace(/\$[0-9,.]+/,`<span class="text-style-strikethrough text-color-neutral-82 text-weight-normal">$${f.toFixed(2)}</span> $${p.toFixed(2)}`))}}function u(f,p){e&&(o&&(o.textContent=`$${f.toFixed(2)}`),e.childNodes[1].nodeValue=` $${p.toFixed(2)}`),s&&(c&&(c.textContent=`$${f.toFixed(2)}`),s.childNodes[1].nodeValue=` $${p.toFixed(2)}`)}function w(f,p,L=!1){const C=f.titleCurrentPrice,P=f.yearBundlePrice,A=f.monthBundlePrice;L?(u(C,C*p),a(P,P*p,n),a(A,A*p,d)):(u(C,C-p),a(P,P-p,n),a(A,A-p,d))}function y(f){t==null||t.setAttribute("style","display: flex;"),i&&(i.textContent=f)}const l=h(),r=getCookie(F.RewardfulReferral),b=getNewsletterDiscountParams(),S=Number(new URLSearchParams(b||"").get("percentOff")||0),I=Number(new URLSearchParams(b||"").get("amountOff")||0),g=((R=r==null?void 0:r.coupon)==null?void 0:R.percent_off)||0,E=((x=r==null?void 0:r.coupon)==null?void 0:x.amount_off)||0,m=l.yearBundlePrice,T=m*(S/100),v=m*(g/100),D=Math.max(T,v,I,E);if(D!==0)if(E===D)w(l,E),t==null||t.setAttribute("style","display: flex;"),y(((k=r==null?void 0:r.coupon)==null?void 0:k.name)||"");else if(I===D){w(l,I);const f=new URLSearchParams(b||"").get("discountName");t==null||t.setAttribute("style","display: flex;"),y(f)}else{const f=1-Math.max(S,g)/100;w(l,f,!0);const p=(S>g?new URLSearchParams(b||"").get("discountName"):(O=r==null?void 0:r.coupon)==null?void 0:O.name)||"Discount";y(p)}}function handleAddToCartPricing(){const e="https://accounts.listenalphabeats.com/sign-up";let t="YEARLY",i="";const o=document.getElementById("plan-annual"),s=document.getElementById("plan-monthly"),c=document.getElementById("payment-upfront"),n=document.getElementById("payment-klarna"),d=document.getElementById("product-buy-primary-btn"),h=document.getElementById("product-buy-primary-btn-mobile");function a(){t="YEARLY",i="",s==null||s.classList.remove("active"),o==null||o.classList.add("active"),n==null||n.classList.remove("disabled"),w(),l()}function u(){t="MONTHLY",o==null||o.classList.remove("active"),s==null||s.classList.add("active"),n==null||n.classList.add("disabled"),w(),l()}function w(){i="",n==null||n.classList.remove("active"),c==null||c.classList.add("active"),l()}function y(){i="klarna",c==null||c.classList.remove("active"),n==null||n.classList.add("active"),l()}function l(){let r=e+"?plan="+t;const b=getNewsletterDiscountParams();b&&(r+="&"+b),i&&(r+="&paymentProvider="+i),d&&(d.href=r),h&&(h.href=r)}o==null||o.addEventListener("click",a),s==null||s.addEventListener("click",u),c==null||c.addEventListener("click",w),n==null||n.addEventListener("click",y),l()}conditionalCookieBanner();guardCioFormsWithRecaptcha();document.addEventListener("DOMContentLoaded",()=>{runAfterConsentResolved({callback:handleNewsletterDiscountPopup,fallback:handleNewsletterDiscountPopup,timeout:4e3})});;