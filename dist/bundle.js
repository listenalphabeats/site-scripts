var S=(n=>(n.RewardfulReferral="rewardful.referral",n))(S||{});function safeDecodeURIComponent(n){return O(n)?decodeURIComponent(n):n}function O(n){try{const o=decodeURIComponent(n);return encodeURIComponent(o)!==n}catch{return!1}}function getCookie(n){n+="=";const c=document.cookie.split(";").find(e=>e.trim().substring(0,n.length)===n);return c?JSON.parse(safeDecodeURIComponent(c.trim().substring(n.length))):null}const NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID="newsletterDiscountParams";function getNewsletterDiscountParams(){return localStorage.getItem(NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID)}function isGooglebot(){return/Googlebot/.test(window.navigator.userAgent)}function runAfterConsentResolved({callback:n,fallback:o,timeout:c=18e3}){const i=Date.now(),e=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(e),window.FsCC.store.confirmed){n();return}const a=()=>{var u;(u=window.FsCC)!=null&&u.store.confirmed&&(clearTimeout(p),n())},p=setTimeout(()=>{var u,r;(r=(u=window.FsCC)==null?void 0:u.consentController)==null||r.off("updateconsents",a),o()},c);window.FsCC.consentController.on("updateconsents",a)}else Date.now()-i>=c&&(clearInterval(e),o())},500)}function runWhenAvailable(n,o,c=100,i=4e3){const e=Date.now();function a(){typeof window[n]=="function"?o():Date.now()-e<i?setTimeout(a,c):console.error(`handleDiscount{n} is not available after handleDiscount{i}ms`)}a()}function runWhenPostHogIsReady({getFeatureFlag:n,callback:o,fallback:c,timeout:i=2e3}){const e=Date.now(),a=setInterval(()=>{n()!==void 0?(clearInterval(a),o()):Date.now()-e>=i&&(clearInterval(a),c())},500)}function guardCioFormsWithRecaptcha(){const n=window.location.host==="staging-alphabeats.webflow.io",o=n?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",c=n?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.nl/v1/forms",i=document.createElement("script");i.async=!0,i.src=`https://www.google.com/recaptcha/enterprise.js?render=handleDiscount{o}`,document.head.appendChild(i);function e(){const s=document.querySelector(".grecaptcha-badge");s&&(s.style.right="-100%",setTimeout(()=>{s.style.visibility="visible"},400))}function a(s){const d=document.querySelector(".grecaptcha-badge");d&&(console.debug("badge:",d),d.style.right={visible:"-186px",hidden:"-100%"}[s])}let p=!1;function u(){p=!1,a("hidden")}async function r(s){var f,y;const d=s.target,b=d.dataset.cioFormId;function w(){s.preventDefault(),s.stopPropagation()}if(p||!d.checkValidity()||!b)return;w();const m=(f=window.grecaptcha)==null?void 0:f.enterprise;if(!(m!=null&&m.execute)){(y=window.Sentry)==null||y.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}p=!0;const g=Object.fromEntries(new FormData(d)),h=Object.keys(g).filter(t=>t.includes("email"));h.length&&h.forEach(t=>g[t]=String(g[t]).toLowerCase()),m.ready(()=>{m.execute(o,{action:"submit"}).then(l=>{const I={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:g,recaptchaToken:l})};return fetch(`handleDiscount{c}/handleDiscount{b}/submit`,I)}).then(()=>{u()}).catch(l=>{var E;(E=window.Sentry)==null||E.captureException(l),u()});const t=d.querySelector('input[type="submit"]');t?t.click():d.submit()})}document.addEventListener("submit",s=>{r(s),u()}),window.addEventListener("load",function(){e(),[...document.forms].forEach(s=>{s.addEventListener("submit",d=>{r(d)}),s.dataset.cioFormId&&(s.addEventListener("focusin",()=>{a("visible")}),s.addEventListener("focusout",()=>setTimeout(()=>a("hidden"),4e3)))})})}function handleNewsletterDiscountPopup(){var m,g,h;const n="couponId=FjYlGRQJ&amountOff=25&discountName=$25 Newsletter Discount",o="discount-modal-a",c="discount-modal-background-a",i="discount-modal-close-button-a",e="discount-form-a",a="formSubmittedAt",p="formDismissedAt";function u(f){const y={show:"flex",hide:"none"}[f],t=document.getElementById(o);t&&(t.style.display=y)}function r(){u("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function s(){u("hide")}function d(){localStorage.setItem(a,String(new Date().getTime())),localStorage.setItem(NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID,n);const f=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");f&&(f.removeAttribute("href"),f.addEventListener("click",s))}function b(){localStorage.setItem(p,String(new Date().getTime())),s()}if(isGooglebot()||!["/","/product","/shop"].includes(window.location.pathname)||getCookie(S.RewardfulReferral)||localStorage.getItem(a))return;const w=localStorage.getItem(p);w&&new Date().getTime()-Number(w)<24*60*60*1e3||(setTimeout(r,2e3),(m=document.getElementById(e))==null||m.addEventListener("submit",d),(g=document.getElementById(i))==null||g.addEventListener("click",b),(h=document.getElementById(c))==null||h.addEventListener("click",b))}function conditionalCookieBanner(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",o.setAttribute("fs-cc-domain",".listenalphabeats.com"),o.setAttribute("fs-cc-mode","opt-in"),o.async=!0;const c=document.createElement("script");c.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",c.async=!0,document.head.appendChild(o),document.head.appendChild(c)}function handleDiscount(){setTimeout(()=>n(),400);function n(){var t,l,E;const o=document.getElementById("discount-badge"),c=document.getElementById("discount-badge-title"),i=document.getElementById("year-bundle-price"),e=document.getElementById("month-bundle-price");function a(){var D,v,A,B;const I=Number(((v=(D=i==null?void 0:i.querySelector(".price"))==null?void 0:D.textContent)==null?void 0:v.replace("handleDiscount",""))||"149"),C=Number(((B=(A=e==null?void 0:e.querySelector(".price"))==null?void 0:A.textContent)==null?void 0:B.replace("handleDiscount",""))||"15.99");return console.debug({annualPrice:I,monthlyPrice:C}),{annualPrice:I,monthlyPrice:C}}function p(I){o==null||o.setAttribute("style","display: flex;"),c&&(c.textContent=I)}const u=a(),r=getCookie(S.RewardfulReferral),s=getNewsletterDiscountParams(),d=Number(new URLSearchParams(s||"").get("percentOff")||0),b=Number(new URLSearchParams(s||"").get("amountOff")||0),w=((t=r==null?void 0:r.coupon)==null?void 0:t.percent_off)||0,m=((l=r==null?void 0:r.coupon)==null?void 0:l.amount_off)||0,g=u.annualPrice,h=g*(d/100),f=g*(w/100),y=Math.max(h,f,b,m);y!==0&&m===y&&p(((E=r==null?void 0:r.coupon)==null?void 0:E.name)||"")}}function handleAddToCartPricing(){var w,m,g,h,f,y;const n="https://accounts.listenalphabeats.com/sign-up";let o="YEARLY",c="",i=!0;const e={annualButton:document.getElementById("plan-annual"),monthlyButton:document.getElementById("plan-monthly"),headbandYes:document.getElementById("headband-yes"),headbandNo:document.getElementById("headband-no"),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),annualFeatures:document.querySelectorAll(".annual-feature"),primaryButtonDesktop:document.getElementById("product-buy-primary-btn")};function a(t,l){t==null||t.classList[l?"add":"remove"]("active")}function p(t,l){t&&(t.style.display=l?"flex":"none")}function u(){let t=`handleDiscount{n}?plan=handleDiscount{o}`;const l=getNewsletterDiscountParams();l&&(t+=`&handleDiscount{l}`),c&&(t+=`&paymentProvider=handleDiscount{c}`),i||(t+="&includeBrainbit=false"),e.primaryButtonDesktop&&(e.primaryButtonDesktop.href=t)}function r(t){o=t?"YEARLY":"MONTHLY",a(e.annualButton,t),a(e.monthlyButton,!t),e.annualFeatures.forEach(l=>p(l,t&&(l!==e.paymentKlarna||i))),d()}function s(t){i=t,a(e.headbandYes,t),a(e.headbandNo,!t),e.paymentKlarna&&p(e.paymentKlarna,t&&o!=="MONTHLY"),d()}function d(){c="",a(e.paymentUpfront,!0),a(e.paymentKlarna,!1),u()}function b(){c="klarna",a(e.paymentUpfront,!1),a(e.paymentKlarna,!0),u()}(w=e.annualButton)==null||w.addEventListener("click",()=>r(!0)),(m=e.monthlyButton)==null||m.addEventListener("click",()=>r(!1)),(g=e.headbandYes)==null||g.addEventListener("click",()=>s(!0)),(h=e.headbandNo)==null||h.addEventListener("click",()=>s(!1)),(f=e.paymentUpfront)==null||f.addEventListener("click",d),(y=e.paymentKlarna)==null||y.addEventListener("click",b),u()}conditionalCookieBanner();guardCioFormsWithRecaptcha();document.addEventListener("DOMContentLoaded",()=>{runAfterConsentResolved({callback:handleNewsletterDiscountPopup,fallback:handleNewsletterDiscountPopup,timeout:4e3})});;