var ab=function(f){"use strict";var A=(e=>(e.RewardfulReferral="rewardful.referral",e))(A||{});function T(e){function t(i){try{const g=decodeURIComponent(i);return encodeURIComponent(g)!==i}catch{return!1}}return t(e)?decodeURIComponent(e):e}function B(e){e+="=";const i=document.cookie.split(";").find(b=>b.trim().substring(0,e.length)===e);return i?JSON.parse(T(i.trim().substring(e.length))):null}const P="newsletterDiscountParams";function L(){return localStorage.getItem(P)}function N(){return/Googlebot/.test(window.navigator.userAgent)}function v(){return window.location.host==="staging-alphabeats.webflow.io"}function O({callback:e,fallback:t,timeout:i=18e3}){const g=Date.now(),b=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(b),window.FsCC.store.confirmed){e();return}const y=()=>{var c;(c=window.FsCC)!=null&&c.store.confirmed&&(clearTimeout(r),e())},r=setTimeout(()=>{var c,o;(o=(c=window.FsCC)==null?void 0:c.consentController)==null||o.off("updateconsents",y),t()},i);window.FsCC.consentController.on("updateconsents",y)}else Date.now()-g>=i&&(clearInterval(b),t())},500)}function _(){const e=v()?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",t=v()?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.nl/v1/forms",i=document.createElement("script");i.async=!0,i.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,document.head.appendChild(i);function g(){const o=document.querySelector(".grecaptcha-badge");o&&(o.style.right="-100%",setTimeout(()=>{o.style.visibility="visible"},400))}function b(o){const n=document.querySelector(".grecaptcha-badge");n&&(n.style.right={visible:"-186px",hidden:"-100%"}[o])}let y=!1;function r(){y=!1,b("hidden")}async function c(o){var S,h;const n=o.target,s=n.dataset.cioFormId;function w(){o.preventDefault(),o.stopPropagation()}if(y||!n.checkValidity()||!s)return;w();const l=(S=window.grecaptcha)==null?void 0:S.enterprise;if(!(l!=null&&l.execute)){(h=window.Sentry)==null||h.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}y=!0;const m=Object.fromEntries(new FormData(n)),E=Object.keys(m).filter(u=>u.includes("email"));E.length&&E.forEach(u=>m[u]=String(m[u]).toLowerCase()),l.ready(()=>{l.execute(e,{action:"submit"}).then(d=>{const D={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:m,recaptchaToken:d})};return fetch(`${t}/${s}/submit`,D)}).then(()=>{r()}).catch(d=>{var C;(C=window.Sentry)==null||C.captureException(d),r()});const u=n.querySelector('input[type="submit"]');u?u.click():n.submit()})}document.addEventListener("submit",o=>{c(o),r()}),window.addEventListener("load",function(){g(),[...document.forms].forEach(o=>{o.addEventListener("submit",n=>{c(n)}),o.dataset.cioFormId&&(o.addEventListener("focusin",()=>{b("visible")}),o.addEventListener("focusout",()=>setTimeout(()=>b("hidden"),4e3)))})})}function R(){var m,E,S;const e="couponId=FjYlGRQJ&amountOff=25&discountName=$25 Newsletter Discount",t="discount-modal-a",i="discount-modal-background-a",g="discount-modal-close-button-a",b="discount-form-a",y="formSubmittedAt",r="formDismissedAt";function c(h){const u={show:"flex",hide:"none"}[h],d=document.getElementById(t);d&&(d.style.display=u)}function o(){c("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function n(){c("hide")}function s(){localStorage.setItem(y,String(new Date().getTime())),localStorage.setItem(P,e);const h=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");h&&(h.removeAttribute("href"),h.addEventListener("click",n))}function w(){localStorage.setItem(r,String(new Date().getTime())),n()}if(N()||!["/","/product","/shop"].includes(window.location.pathname)||B(A.RewardfulReferral)||localStorage.getItem(y))return;const l=localStorage.getItem(r);l&&new Date().getTime()-Number(l)<864e5||(setTimeout(o,2e3),(m=document.getElementById(b))==null||m.addEventListener("submit",s),(E=document.getElementById(g))==null||E.addEventListener("click",w),(S=document.getElementById(i))==null||S.addEventListener("click",w))}function F(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",t.setAttribute("fs-cc-domain",".listenalphabeats.com"),t.setAttribute("fs-cc-mode","opt-in"),t.async=!0;const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",i.async=!0,document.head.appendChild(t),document.head.appendChild(i)}function U(){setTimeout(()=>{g(),b(),y()},200);const e={annual:{price:149,strikedPrice:149},monthly:{price:15.99,strikedPrice:15.99},brainbit:{annual:{price:449,strikedPrice:449},monthly:{price:499,strikedPrice:499}}},t={annualButton:document.getElementById("plan-annual"),monthlyButton:document.getElementById("plan-monthly"),headbandYes:document.getElementById("headband-yes"),headbandNo:document.getElementById("headband-no"),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),annualFeatures:document.querySelectorAll(".annual-feature"),primaryButtonDesktop:document.getElementById("product-buy-primary-btn")};function i(r,c,o){if(!r)return;const n=r.querySelector(".price-strikethrough"),s=r.querySelector(".price");n&&(n.innerText="$"+c.toFixed(2),n.style.display=c===o?"none":"block"),s&&(s.innerText="$"+o.toFixed(2))}function g(){i(t.annualButton,e.annual.strikedPrice,e.annual.price),i(t.monthlyButton,e.monthly.strikedPrice,e.monthly.price),i(t.headbandYes,e.brainbit.annual.strikedPrice,e.brainbit.annual.price)}function b(){var C,D,I,k;const r=document.getElementById("discount-badge"),c=document.getElementById("discount-badge-title");function o(a){r==null||r.setAttribute("style","display: flex;"),c&&(c.textContent=a)}const n=B(A.RewardfulReferral),s=L(),w=Number(new URLSearchParams(s||"").get("percentOff")||0),l=Number(new URLSearchParams(s||"").get("amountOff")||0),m=((C=n==null?void 0:n.coupon)==null?void 0:C.percent_off)||0,E=((D=n==null?void 0:n.coupon)==null?void 0:D.amount_off)||0,S=e.annual.price*(w/100),h=e.annual.price*(m/100),u=Math.max(S,h,l,E);if(u===0)return;let d="";if(E===u)d=((I=n==null?void 0:n.coupon)==null?void 0:I.name)||"",d&&(d+=" will be applied at checkout");else if(l===u)d=new URLSearchParams(s||"").get("discountName")||"",d&&(d+=" will be applied at checkout");else{d=(w>m?new URLSearchParams(s||"").get("discountName"):(k=n==null?void 0:n.coupon)==null?void 0:k.name)||"Discount";const p=1-Math.max(w,m)/100;e.annual.price*=p,e.monthly.price*=p,e.brainbit.annual.price*=p,e.brainbit.monthly.price*=p,g()}o(d)}function y(){var u,d,C,D,I,k;const r=v()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up";let c="YEARLY",o="",n=!0;function s(a,p){a==null||a.classList[p?"add":"remove"]("active")}function w(a,p){a&&(a.style.display=p?"flex":"none")}function l(){let a=`${r}?plan=${c}`;const p=L();p&&(a+=`&${p}`),o&&(a+=`&paymentProvider=${o}`),n||(a+="&includeBrainbit=false"),t.primaryButtonDesktop&&(t.primaryButtonDesktop.href=a)}function m(a){c=a?"YEARLY":"MONTHLY",s(t.annualButton,a),s(t.monthlyButton,!a),t.annualFeatures.forEach(p=>w(p,a&&(p!==t.paymentKlarna||n))),S(),a?i(t.headbandYes,e.brainbit.annual.strikedPrice,e.brainbit.annual.price):i(t.headbandYes,e.brainbit.monthly.strikedPrice,e.brainbit.monthly.price)}function E(a){n=a,s(t.headbandYes,a),s(t.headbandNo,!a),t.paymentKlarna&&w(t.paymentKlarna,a&&c!=="MONTHLY"),S()}function S(){o="",s(t.paymentUpfront,!0),s(t.paymentKlarna,!1),l()}function h(){o="klarna",s(t.paymentUpfront,!1),s(t.paymentKlarna,!0),l()}(u=t.annualButton)==null||u.addEventListener("click",()=>m(!0)),(d=t.monthlyButton)==null||d.addEventListener("click",()=>m(!1)),(C=t.headbandYes)==null||C.addEventListener("click",()=>E(!0)),(D=t.headbandNo)==null||D.addEventListener("click",()=>E(!1)),(I=t.paymentUpfront)==null||I.addEventListener("click",S),(k=t.paymentKlarna)==null||k.addEventListener("click",h),l()}}return F(),_(),document.addEventListener("DOMContentLoaded",()=>{O({callback:R,fallback:R,timeout:4e3})}),f.NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID=P,f.conditionalCookieBanner=F,f.getCookie=B,f.getNewsletterDiscountParams=L,f.guardCioFormsWithRecaptcha=_,f.handleCartWithDiscount=U,f.handleNewsletterDiscountPopup=R,f.isGooglebot=N,f.isStaging=v,f.runAfterConsentResolved=O,f.safeDecodeURIComponent=T,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),f}({});
