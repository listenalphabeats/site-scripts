var ab=function(i){"use strict";var q=(e=>(e.RewardfulReferral="rewardful.referral",e))(q||{}),g=(e=>(e.SUBSCRIPTION_ONLY="subscription-only",e.MUSE_IN_BOX="muse-in-box",e.BRAINBIT="brainbit",e.MUSE="muse",e))(g||{});function Y(e){function t(n){try{const s=decodeURIComponent(n);return encodeURIComponent(s)!==n}catch{return!1}}return t(e)?decodeURIComponent(e):e}function $(e){e+="=";const n=document.cookie.split(";").find(u=>u.trim().substring(0,e.length)===e);return n?JSON.parse(Y(n.trim().substring(e.length))):null}function K(){return/Googlebot/.test(window.navigator.userAgent)}function P(){return window.location.host==="staging-alphabeats.webflow.io"}function j({callback:e,fallback:t,timeout:n=18e3}){const s=Date.now(),u=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(u),window.FsCC.store.confirmed){e();return}const o=()=>{var l;(l=window.FsCC)!=null&&l.store.confirmed&&(clearTimeout(f),e())},f=setTimeout(()=>{var l,r;(r=(l=window.FsCC)==null?void 0:l.consentController)==null||r.off("updateconsents",o),t()},n);window.FsCC.consentController.on("updateconsents",o)}else Date.now()-s>=n&&(clearInterval(u),t())},500)}function G(){const e=P()?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",t=P()?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.com/v1/forms",n=document.createElement("script");n.async=!0,n.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,document.head.appendChild(n);function s(){const r=document.querySelector(".grecaptcha-badge");r&&(r.style.right="-100%",setTimeout(()=>{r.style.visibility="visible"},400))}function u(r){const d=document.querySelector(".grecaptcha-badge");d&&(d.style.right={visible:"-186px",hidden:"-100%"}[r])}let o=!1;function f(){o=!1,u("hidden")}async function l(r){var m,I;const d=r.target,S=d.dataset.cioFormId;function w(){r.preventDefault(),r.stopPropagation()}if(o||!d.checkValidity()||!S)return;w();const a=(m=window.grecaptcha)==null?void 0:m.enterprise;if(!(a!=null&&a.execute)){(I=window.Sentry)==null||I.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}o=!0;const c=Object.fromEntries(new FormData(d)),h=Object.keys(c).filter(y=>y.includes("email"));h.length&&h.forEach(y=>c[y]=String(c[y]).toLowerCase()),a.ready(()=>{a.execute(e,{action:"submit"}).then(O=>{const v={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:c,recaptchaToken:O})};return fetch(`${t}/${S}/submit`,v)}).then(()=>{f()}).catch(O=>{var B;(B=window.Sentry)==null||B.captureException(O),f()});const y=d.querySelector('input[type="submit"]');y?y.click():d.submit()})}document.addEventListener("submit",r=>{l(r),f()}),window.addEventListener("load",function(){s(),[...document.forms].forEach(r=>{r.addEventListener("submit",d=>{l(d)}),r.dataset.cioFormId&&(r.addEventListener("focusin",()=>{u("visible")}),r.addEventListener("focusout",()=>setTimeout(()=>u("hidden"),4e3)))})})}const A="partners";function H(e){localStorage.setItem("partner",e)}function oe(){return localStorage.getItem("partner")}function ie(e){return window.location.replace(`/${A}/${e}`)}function V(e){const t=new URL(e.path,window.location.origin);e.searchParams&&(t.search=String(e.searchParams)),window.location.replace(String(t))}function se(e,t){const n=new URL(window.location.href);n.searchParams.set(e,t),window.history.replaceState({},"",n)}function T(e){return new URLSearchParams(window.location.search).get(e)}function M({getMethod:e,callback:t,interval:n=100,timeout:s=2e3}){const u=Date.now(),o=setInterval(()=>{typeof e()=="function"?(clearInterval(o),t()):Date.now()-u>=s&&(clearInterval(o),console.warn(`method is not available after ${s}ms`))},n)}function _(){var a,c,h;const e="discount-modal-a",t="discount-modal-background-a",n="discount-modal-close-button-a",s="discount-form-a",u="formSubmittedAt",o="formDismissedAt";function f(m){const I={show:"flex",hide:"none"}[m],y=document.getElementById(e);y&&(y.style.display=I)}function l(){f("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function r(){f("hide")}function d(){localStorage.setItem(u,String(new Date().getTime()));const m=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");m&&(m.removeAttribute("href"),m.addEventListener("click",r))}function S(){localStorage.setItem(o,String(new Date().getTime())),r()}if(K()||$(q.RewardfulReferral)||localStorage.getItem(u))return;const w=localStorage.getItem(o);w&&new Date().getTime()-Number(w)<864e5||(setTimeout(l,2e3),(a=document.getElementById(s))==null||a.addEventListener("submit",d),(c=document.getElementById(n))==null||c.addEventListener("click",S),(h=document.getElementById(t))==null||h.addEventListener("click",S))}function W(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",t.setAttribute("fs-cc-domain",".listenalphabeats.com"),t.setAttribute("fs-cc-mode","opt-in"),t.async=!0;const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",n.async=!0,document.head.appendChild(t),document.head.appendChild(n)}const C="is-internal";function ce(){const t=new URLSearchParams(window.location.search).get(C);t==="true"?le():t==="false"&&ue()}function le(){M({getMethod:()=>{var e;return(e=window.posthog)==null?void 0:e.capture},callback:()=>{var e,t;console.debug(`Setting ${C} to true`),(e=window.posthog)==null||e.setPersonPropertiesForFlags({[C]:!0}),(t=window.posthog)==null||t.reloadFeatureFlags()}})}function ue(){M({getMethod:()=>{var e;return(e=window.posthog)==null?void 0:e.capture},callback:()=>{var e,t;console.debug(`Setting ${C} to false`),(e=window.posthog)==null||e.setPersonPropertiesForFlags({[C]:!1}),(t=window.posthog)==null||t.reloadFeatureFlags()}})}const R="in-box-offer",de="generic",z="ces-discount";function U(){return{discountName:"Limited Time Special Discount",couponId:P()?"mhAenRNG":"70LO0cr8",amountOff:100}}function D(){return{discountName:"Limited Time Special Discount",couponId:P()?"HmBrVIcf":"4WDuUowk",amountOff:250}}function k(){return{discountName:"50% Off SuperBowl Deal",couponId:P()?"gmtxMx5q":"osSWNTSD",amountOff:250}}function L(e){if(!e)return;const t=e.textContent;if(!t)return;const n=t.replace("$","");return Number(n)}function F(e,t){const n=document.querySelectorAll(e);if(!n)return;const s=n[t];s&&setTimeout(()=>s.click())}function fe(e){const t=new URLSearchParams(window.location.search);if(!t.has(e.searchParamName))return;const n=t.get(e.searchParamName);n&&F(e.tabSelector,Number(n))}function b(e,t){e==null||e.classList[t?"add":"remove"]("active")}function p(e,t){e&&(e.style.display=t?"flex":"none")}function X(){if(!new URLSearchParams(window.location.search).has(R))return;const t=document.getElementById("badge-annual-sub-offer"),n=document.getElementById("badge-annual-sub-month-trial");p(t,!1),p(n,!0)}function N(e,t){var s;const n=document.querySelector(e);(s=n==null?void 0:n.lastElementChild)!=null&&s.textContent&&(n.lastElementChild.textContent=t,n.style.display="flex")}function me(){var o,f,l,r,d,S,w;const e={imageSetDefault:document.getElementById("default-product-image-carousel"),imageSetMuse:document.getElementById(g.MUSE+"-product-image-carousel"),imageSetBrainbit:document.getElementById(g.BRAINBIT+"-product-image-carousel"),subscriptionOnly:document.getElementById(g.SUBSCRIPTION_ONLY),subscriptionOnlyMonthly:document.getElementById(g.SUBSCRIPTION_ONLY+"-monthly"),bundleMuse:document.getElementById("bundle-"+g.MUSE),bundleBrainbit:document.getElementById("bundle-"+g.BRAINBIT),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),primaryBuyButton:document.getElementById("product-buy-primary-btn")},t=T("offer")===z||T("offer")===de&&((o=window.posthog)==null?void 0:o.isFeatureEnabled("is-generic-offer-on")),n={discountName:"",amountOff:0,couponId:""},s={[g.SUBSCRIPTION_ONLY]:n,[g.SUBSCRIPTION_ONLY+"-monthly"]:n,[g.MUSE]:t?U():n,[g.BRAINBIT]:t?D():k()};function u(){var x,Q,J,Z,ee,te;let a=g.SUBSCRIPTION_ONLY,c="YEARLY",h="";function m(){const Se=P()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up";let E=new URLSearchParams([["bundleType",a],["plan",c]]);if(h&&E.append("paymentProvider",h),c==="YEARLY"){const{discountName:ne,amountOff:ae,couponId:re}=s[a];ne&&E.append("discountName",ne),ae&&E.append("amountOff",String(ae)),re&&E.append("couponId",re),a===g.SUBSCRIPTION_ONLY&&E.append("trialBadge","7-day free trial included");const we=new URLSearchParams(window.location.search);a===g.SUBSCRIPTION_ONLY&&we.has(R)&&(E.set("bundleType",g.MUSE_IN_BOX),E.set("trialBadge","Muse 1-month free trial included"))}e.primaryBuyButton&&(e.primaryBuyButton.href=`${Se}?${E}`)}function I(){a=g.SUBSCRIPTION_ONLY,c="YEARLY",p(e.imageSetDefault,!0),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!1),h="",p(e.paymentKlarna,!1),v(),b(e.subscriptionOnly,!0),b(e.subscriptionOnlyMonthly,!1),b(e.bundleBrainbit,!1),b(e.bundleMuse,!1),m()}function y(){a=g.SUBSCRIPTION_ONLY,c="MONTHLY",p(e.imageSetDefault,!0),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!1),h="",p(e.paymentKlarna,!1),v(),b(e.subscriptionOnly,!1),b(e.subscriptionOnlyMonthly,!0),b(e.bundleBrainbit,!1),b(e.bundleMuse,!1),m()}function O(){a=g.MUSE,c="YEARLY",p(e.paymentKlarna,!0),p(e.imageSetDefault,!1),p(e.imageSetMuse,!0),p(e.imageSetBrainbit,!1),b(e.subscriptionOnly,!1),b(e.subscriptionOnlyMonthly,!1),b(e.bundleBrainbit,!1),b(e.bundleMuse,!0),m()}function B(){a=g.BRAINBIT,c="YEARLY",p(e.paymentKlarna,!0),p(e.imageSetDefault,!1),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!0),b(e.subscriptionOnly,!1),b(e.subscriptionOnlyMonthly,!1),b(e.bundleBrainbit,!0),b(e.bundleMuse,!1),m()}function v(){h="",b(e.paymentUpfront,!0),b(e.paymentKlarna,!1),m()}function ye(){h="klarna",b(e.paymentUpfront,!1),b(e.paymentKlarna,!0),m()}(x=e.subscriptionOnly)==null||x.addEventListener("click",I),(Q=e.subscriptionOnlyMonthly)==null||Q.addEventListener("click",y),(J=e.bundleMuse)==null||J.addEventListener("click",O),(Z=e.bundleBrainbit)==null||Z.addEventListener("click",B),(ee=e.paymentUpfront)==null||ee.addEventListener("click",v),(te=e.paymentKlarna)==null||te.addEventListener("click",ye),t?O():B(),m()}if(u(),X(),t){N("#bundle-muse .offer-badge-hidden",U().discountName+" applied"),N("#bundle-brainbit .offer-badge-hidden",D().discountName+" applied");const a=(f=e.bundleMuse)==null?void 0:f.querySelector(".price.text-style-strikethrough"),c=a&&L(a);if(c){const I=c-U().amountOff,y=(l=e.bundleMuse)==null?void 0:l.querySelector(".price.to-pay");y&&(y.textContent=`$${I}`,p(a,!0))}const h=(r=e.bundleBrainbit)==null?void 0:r.querySelector(".price.text-style-strikethrough"),m=h&&L(h);if(m){const I=m-D().amountOff,y=(d=e.bundleBrainbit)==null?void 0:d.querySelector(".price.to-pay");y&&(y.textContent=`$${I}`,p(h,!0))}}else{N("#bundle-brainbit .offer-badge-hidden",k().discountName+" applied");const a=(S=e.bundleBrainbit)==null?void 0:S.querySelector(".price.text-style-strikethrough"),c=a&&L(a);if(c){const h=c-k().amountOff,m=(w=e.bundleBrainbit)==null?void 0:w.querySelector(".price.to-pay");m&&(m.textContent=`$${h}`,p(a,!0))}F(".product-tabs_tab",1)}}function pe(){const{Swiper:e}=window;if(!e)return;const t=document.createElement("style");t.textContent=`
    .product_image_carousel .product-thumb-large_slide {
      width: 100% !important;
    }
  `,document.head.appendChild(t);const n=document.querySelectorAll(".product-image-carousel"),s=document.querySelectorAll(".product_image_carousel");for(const o of n)u(o,!1);for(const o of s)u(o,!0);function u(o,f){const l=o.querySelector(".product-thumb-large_container");if(!e||!l)return;const r=o.querySelector(".swiper-navigation_component.is-product-thumbnail"),d={wrapperClass:"product-thumb-large_wrapper",slideClass:"product-thumb-large_slide",direction:"horizontal",slidesPerView:1,spaceBetween:0,grabCursor:!0,effect:"fade",loop:!0,keyboard:{onlyInViewport:!0,enabled:!0},pagination:{el:r==null?void 0:r.querySelector(".swiper-pagination"),bulletClass:"swiper-pagination_bullet",bulletActiveClass:"is-active",dynamicBullets:!1,clickable:!0}};if(f)Object.assign(d,{fadeEffect:{crossFade:!0}});else{Object.assign(d,{navigation:{nextEl:r==null?void 0:r.querySelector("[data-action=next-slide]"),prevEl:r==null?void 0:r.querySelector("[data-action=prev-slide]")}});const S=o.querySelector(".product-thumb-small_container");if(S){const w=new e(S,{wrapperClass:"product-thumb-small_wrapper",slideClass:"product-thumb-small_slide",direction:"horizontal",slidesPerView:"auto",spaceBetween:0});Object.assign(d,{thumbs:{swiper:w,slideThumbActiveClass:"is-active"}})}}new e(l,d)}}function be(){if(!new URLSearchParams(window.location.search).has(R))return;function t(f,l){f&&(f.style.display=l?"flex":"none")}const n=document.getElementById("free-trial"),s=document.getElementById("pre-order");if(!n||!s)return;t(n,!0),t(s,!1);const u=n.querySelector("a");if(!u)return;const o=new URL(u.href);o.searchParams.set(R,"true"),u.href=o.toString()}function he(){const e={usat:{discountName:"USAT 15% Off",couponId:P()?"pdSuKVbv":"cpvIXqMd",percentOff:"15"}};if(!window.location.pathname.includes(`/${A}/`))return;const t=document.querySelectorAll("#payment-upfront"),n=document.querySelectorAll("#payment-klarna"),s=document.querySelectorAll("#product-buy-primary-btn");function u(){const a=window.location.pathname.split(`/${A}/`)[1];if(a)return H(a),a}function o(a,c){a==null||a.classList[c?"add":"remove"]("active")}const f=u();if(!f||!e[f])return;const l=e[f];let r="";function d(){if(!f||!e[f])return;const a=P()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up",c=new URLSearchParams([["partner",f],["couponId",l.couponId],["discountName",l.discountName]]);l.amountOff?c.append("amountOff",l.amountOff):l.percentOff&&c.append("percentOff",l.percentOff),r&&c.append("paymentProvider",r),s.forEach(h=>h.href=`${a}?${c}`)}function S(){r="",t.forEach(a=>o(a,!0)),n.forEach(a=>o(a,!1)),d()}function w(){r="klarna",t.forEach(a=>o(a,!1)),n.forEach(a=>o(a,!0)),d()}t.forEach(a=>a.addEventListener("click",S)),n.forEach(a=>a.addEventListener("click",w)),d()}function ge(){window.location.pathname==="/partners/amaze"&&V({path:"/product",searchParams:new URLSearchParams({offer:z,tabIndex:"1"})})}return W(),G(),ce(),document.addEventListener("DOMContentLoaded",()=>{j({callback:_,fallback:_,timeout:4e3})}),i.PARTNERS_PATH=A,i.conditionalCookieBanner=W,i.getCookie=$,i.getPartnerNameInStorage=oe,i.getSearchParam=T,i.guardCioFormsWithRecaptcha=G,i.handleCart=me,i.handleImageCarousel=pe,i.handleInitialTab=fe,i.handleMuseInBoxBadge=X,i.handleMuseInBoxOffer=be,i.handleNewsletterDiscountPopup=_,i.handlePartnerLanding=he,i.isGooglebot=K,i.isStaging=P,i.parsePriceValue=L,i.redirectAmazeToProduct=ge,i.redirectToPartnerPage=ie,i.redirectWithParams=V,i.runAfterConsentResolved=j,i.runWhenAvailable=M,i.safeDecodeURIComponent=Y,i.setActive=b,i.setActiveTab=F,i.setDisplay=p,i.setPartnerNameInStorage=H,i.setSearchParam=se,i.showOfferBadge=N,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),i}({});
