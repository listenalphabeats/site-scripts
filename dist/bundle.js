var ab=function(i){"use strict";var $=(e=>(e.RewardfulReferral="rewardful.referral",e))($||{}),g=(e=>(e.SUBSCRIPTION_ONLY="subscription-only",e.MUSE_IN_BOX="muse-in-box",e.BRAINBIT="brainbit",e.MUSE="muse",e))(g||{});function K(e){function t(n){try{const s=decodeURIComponent(n);return encodeURIComponent(s)!==n}catch{return!1}}return t(e)?decodeURIComponent(e):e}function j(e){e+="=";const n=document.cookie.split(";").find(c=>c.trim().substring(0,e.length)===e);return n?JSON.parse(K(n.trim().substring(e.length))):null}function H(){return/Googlebot/.test(window.navigator.userAgent)}function P(){return window.location.host==="staging-alphabeats.webflow.io"}function G({callback:e,fallback:t,timeout:n=18e3}){const s=Date.now(),c=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(c),window.FsCC.store.confirmed){e();return}const r=()=>{var u;(u=window.FsCC)!=null&&u.store.confirmed&&(clearTimeout(m),e())},m=setTimeout(()=>{var u,a;(a=(u=window.FsCC)==null?void 0:u.consentController)==null||a.off("updateconsents",r),t()},n);window.FsCC.consentController.on("updateconsents",r)}else Date.now()-s>=n&&(clearInterval(c),t())},500)}function V(){const e=P()?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",t=P()?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.com/v1/forms",n=document.createElement("script");n.async=!0,n.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,document.head.appendChild(n);function s(){const a=document.querySelector(".grecaptcha-badge");a&&(a.style.right="-100%",setTimeout(()=>{a.style.visibility="visible"},400))}function c(a){const l=document.querySelector(".grecaptcha-badge");l&&(l.style.right={visible:"-186px",hidden:"-100%"}[a])}let r=!1;function m(){r=!1,c("hidden")}async function u(a){var I,f;const l=a.target,w=l.dataset.cioFormId;function O(){a.preventDefault(),a.stopPropagation()}if(r||!l.checkValidity()||!w)return;O();const o=(I=window.grecaptcha)==null?void 0:I.enterprise;if(!(o!=null&&o.execute)){(f=window.Sentry)==null||f.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}r=!0;const S=Object.fromEntries(new FormData(l)),E=Object.keys(S).filter(d=>d.includes("email"));E.length&&E.forEach(d=>S[d]=String(S[d]).toLowerCase()),o.ready(()=>{o.execute(e,{action:"submit"}).then(y=>{const B={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:S,recaptchaToken:y})};return fetch(`${t}/${w}/submit`,B)}).then(()=>{m()}).catch(y=>{var b;(b=window.Sentry)==null||b.captureException(y),m()});const d=l.querySelector('input[type="submit"]');d?d.click():l.submit()})}document.addEventListener("submit",a=>{u(a),m()}),window.addEventListener("load",function(){s(),[...document.forms].forEach(a=>{a.addEventListener("submit",l=>{u(l)}),a.dataset.cioFormId&&(a.addEventListener("focusin",()=>{c("visible")}),a.addEventListener("focusout",()=>setTimeout(()=>c("hidden"),4e3)))})})}const L="partners";function W(e){localStorage.setItem("partner",e)}function le(){return localStorage.getItem("partner")}function de(e){return window.location.replace(`/${L}/${e}`)}function z(e){const t=new URL(e.path,window.location.origin);e.searchParams&&(t.search=String(e.searchParams)),window.location.replace(String(t))}function fe(e,t){const n=new URL(window.location.href);n.searchParams.set(e,t),window.history.replaceState({},"",n)}function R(e){return new URLSearchParams(window.location.search).get(e)}function U({getMethod:e,callback:t,interval:n=100,timeout:s=2e3}){const c=Date.now(),r=setInterval(()=>{typeof e()=="function"?(clearInterval(r),t()):Date.now()-c>=s&&(clearInterval(r),console.warn(`method is not available after ${s}ms`))},n)}function D(){var o,S,E;const e="discount-modal-a",t="discount-modal-background-a",n="discount-modal-close-button-a",s="discount-form-a",c="formSubmittedAt",r="formDismissedAt";function m(I){const f={show:"flex",hide:"none"}[I],d=document.getElementById(e);d&&(d.style.display=f)}function u(){m("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function a(){m("hide")}function l(){localStorage.setItem(c,String(new Date().getTime()));const I=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");I&&(I.removeAttribute("href"),I.addEventListener("click",a))}function w(){localStorage.setItem(r,String(new Date().getTime())),a()}if(H()||j($.RewardfulReferral)||localStorage.getItem(c))return;const O=localStorage.getItem(r);O&&new Date().getTime()-Number(O)<864e5||(setTimeout(u,2e3),(o=document.getElementById(s))==null||o.addEventListener("submit",l),(S=document.getElementById(n))==null||S.addEventListener("click",w),(E=document.getElementById(t))==null||E.addEventListener("click",w))}function x(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",t.setAttribute("fs-cc-domain",".listenalphabeats.com"),t.setAttribute("fs-cc-mode","opt-in"),t.async=!0;const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",n.async=!0,document.head.appendChild(t),document.head.appendChild(n)}const v="is-internal";function me(){const t=new URLSearchParams(window.location.search).get(v);t==="true"?pe():t==="false"&&he()}function pe(){U({getMethod:()=>{var e;return(e=window.posthog)==null?void 0:e.capture},callback:()=>{var e,t;console.debug(`Setting ${v} to true`),(e=window.posthog)==null||e.setPersonPropertiesForFlags({[v]:!0}),(t=window.posthog)==null||t.reloadFeatureFlags()}})}function he(){U({getMethod:()=>{var e;return(e=window.posthog)==null?void 0:e.capture},callback:()=>{var e,t;console.debug(`Setting ${v} to false`),(e=window.posthog)==null||e.setPersonPropertiesForFlags({[v]:!1}),(t=window.posthog)==null||t.reloadFeatureFlags()}})}const N="in-box-offer",be="generic",X="ces-discount",ge="musers-feb",J="muse-partner-discount";function F(){return{discountName:"Limited Time Special Discount",couponId:P()?"mhAenRNG":"70LO0cr8",amountOff:100}}function k(){return{discountName:"Limited Time Special Discount",couponId:P()?"HmBrVIcf":"4WDuUowk",amountOff:250}}function q(){return{discountName:"20% off the annual membership",couponId:P()?"zQ6JJHDP":"gI3zXMpo",amountOff:19.8}}function _(){return{discountName:"15% Muse partner discount",couponId:P()?"mTdF2WaN":"fEiKmnij",amountOff:14.85}}function M(e){if(!e)return;const t=e.textContent;if(!t)return;const n=t.match(/\$(\d+(?:\.\d{2})?)/);if(n)return Number(n[1])}function Q(e,t){const n=document.querySelectorAll(e);if(!n)return;const s=n[t];s&&setTimeout(()=>s.click())}function ye(e){const t=new URLSearchParams(window.location.search);if(!t.has(e.searchParamName))return;const n=t.get(e.searchParamName);n&&Q(e.tabSelector,Number(n))}function h(e,t){e==null||e.classList[t?"add":"remove"]("active")}function p(e,t){e&&(e.style.display=t?"flex":"none")}function Z(){if(!new URLSearchParams(window.location.search).has(N))return;const t=document.getElementById("badge-annual-sub-offer"),n=document.getElementById("badge-annual-sub-month-trial");p(t,!1),p(n,!0)}function T(e,t){var s;const n=document.querySelector(e);(s=n==null?void 0:n.lastElementChild)!=null&&s.textContent&&(n.lastElementChild.textContent=t,n.style.display="flex")}function Se(){var u,a,l,w,O,o,S,E,I;const e={imageSetDefault:document.getElementById("default-product-image-carousel"),imageSetMuse:document.getElementById(g.MUSE+"-product-image-carousel"),imageSetBrainbit:document.getElementById(g.BRAINBIT+"-product-image-carousel"),subscriptionOnly:document.getElementById(g.SUBSCRIPTION_ONLY),subscriptionOnlyMonthly:document.getElementById(g.SUBSCRIPTION_ONLY+"-monthly"),bundleMuse:document.getElementById("bundle-"+g.MUSE),bundleBrainbit:document.getElementById("bundle-"+g.BRAINBIT),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),primaryBuyButton:document.getElementById("product-buy-primary-btn")},t=R("offer")===X||R("offer")===be&&((u=window.posthog)==null?void 0:u.isFeatureEnabled("is-generic-offer-on")),n=R("offer")===ge,s=R("offer")===J,c={discountName:"",amountOff:0,couponId:""},r={[g.SUBSCRIPTION_ONLY]:n?q():s?_():c,[g.SUBSCRIPTION_ONLY+"-monthly"]:c,[g.MUSE]:t?F():c,[g.BRAINBIT]:t?k():c};function m(){var te,ne,ae,re,oe,ie;let f=g.SUBSCRIPTION_ONLY,d="YEARLY",y="";function b(){const Ae=P()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up";let C=new URLSearchParams([["bundleType",f],["plan",d]]);if(y&&C.append("paymentProvider",y),d==="YEARLY"){const{discountName:se,amountOff:ce,couponId:ue}=r[f];se&&C.append("discountName",se),ce&&C.append("amountOff",String(ce)),ue&&C.append("couponId",ue),f===g.SUBSCRIPTION_ONLY&&C.append("trialBadge","7-day free trial included");const Re=new URLSearchParams(window.location.search);f===g.SUBSCRIPTION_ONLY&&Re.has(N)&&(C.set("bundleType",g.MUSE_IN_BOX),C.set("trialBadge","Muse 1-month free trial included"))}e.primaryBuyButton&&(e.primaryBuyButton.href=`${Ae}?${C}`)}function B(){f=g.SUBSCRIPTION_ONLY,d="YEARLY",p(e.imageSetDefault,!0),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!1),y="",p(e.paymentKlarna,!1),Y(),h(e.subscriptionOnly,!0),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!1),h(e.bundleMuse,!1),b()}function A(){f=g.SUBSCRIPTION_ONLY,d="MONTHLY",p(e.imageSetDefault,!0),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!1),y="",p(e.paymentKlarna,!1),Y(),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!0),h(e.bundleBrainbit,!1),h(e.bundleMuse,!1),b()}function ee(){f=g.MUSE,d="YEARLY",p(e.paymentKlarna,!0),p(e.imageSetDefault,!1),p(e.imageSetMuse,!0),p(e.imageSetBrainbit,!1),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!1),h(e.bundleMuse,!0),b()}function Be(){f=g.BRAINBIT,d="YEARLY",p(e.paymentKlarna,!0),p(e.imageSetDefault,!1),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!0),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!0),h(e.bundleMuse,!1),b()}function Y(){y="",h(e.paymentUpfront,!0),h(e.paymentKlarna,!1),b()}function Ce(){y="klarna",h(e.paymentUpfront,!1),h(e.paymentKlarna,!0),b()}(te=e.subscriptionOnly)==null||te.addEventListener("click",B),(ne=e.subscriptionOnlyMonthly)==null||ne.addEventListener("click",A),(ae=e.bundleMuse)==null||ae.addEventListener("click",ee),(re=e.bundleBrainbit)==null||re.addEventListener("click",Be),(oe=e.paymentUpfront)==null||oe.addEventListener("click",Y),(ie=e.paymentKlarna)==null||ie.addEventListener("click",Ce),t?ee():B(),b()}if(m(),Z(),t){T("#bundle-muse .offer-badge-hidden",F().discountName+" applied"),T("#bundle-brainbit .offer-badge-hidden",k().discountName+" applied");const f=(a=e.bundleMuse)==null?void 0:a.querySelector(".price.text-style-strikethrough"),d=f&&M(f);if(d){const B=d-F().amountOff,A=(l=e.bundleMuse)==null?void 0:l.querySelector(".price.to-pay");A&&(A.textContent=`$${B}`,p(f,!0))}const y=(w=e.bundleBrainbit)==null?void 0:w.querySelector(".price.text-style-strikethrough"),b=y&&M(y);if(b){const B=b-k().amountOff,A=(O=e.bundleBrainbit)==null?void 0:O.querySelector(".price.to-pay");A&&(A.textContent=`$${B}`,p(y,!0))}}else if(n){T("#badge-annual-sub-offer",q().discountName+" applied");const f=(o=e.subscriptionOnly)==null?void 0:o.querySelector(".price.text-style-strikethrough"),d=f&&M(f);if(d){const y=d-q().amountOff,b=(S=e.subscriptionOnly)==null?void 0:S.querySelector(".price.to-pay");b&&(b.textContent=`$${y.toFixed(2)}/year`,p(f,!0))}}else if(s){T("#badge-annual-sub-offer",_().discountName+" applied");const f=(E=e.subscriptionOnly)==null?void 0:E.querySelector(".price.text-style-strikethrough"),d=f&&M(f);if(d){const y=d-_().amountOff,b=(I=e.subscriptionOnly)==null?void 0:I.querySelector(".price.to-pay");b&&(b.textContent=`$${y.toFixed(2)}/year`,p(f,!0))}}}function we(){const{Swiper:e}=window;if(!e)return;const t=document.createElement("style");t.textContent=`
    .product_image_carousel .product-thumb-large_slide {
      width: 100% !important;
    }
  `,document.head.appendChild(t);const n=document.querySelectorAll(".product-image-carousel"),s=document.querySelectorAll(".product_image_carousel");for(const r of n)c(r,!1);for(const r of s)c(r,!0);function c(r,m){const u=r.querySelector(".product-thumb-large_container");if(!e||!u)return;const a=r.querySelector(".swiper-navigation_component.is-product-thumbnail"),l={wrapperClass:"product-thumb-large_wrapper",slideClass:"product-thumb-large_slide",direction:"horizontal",slidesPerView:1,spaceBetween:0,grabCursor:!0,effect:"fade",loop:!0,keyboard:{onlyInViewport:!0,enabled:!0},pagination:{el:a==null?void 0:a.querySelector(".swiper-pagination"),bulletClass:"swiper-pagination_bullet",bulletActiveClass:"is-active",dynamicBullets:!1,clickable:!0}};if(m)Object.assign(l,{fadeEffect:{crossFade:!0}});else{Object.assign(l,{navigation:{nextEl:a==null?void 0:a.querySelector("[data-action=next-slide]"),prevEl:a==null?void 0:a.querySelector("[data-action=prev-slide]")}});const w=r.querySelector(".product-thumb-small_container");if(w){const O=new e(w,{wrapperClass:"product-thumb-small_wrapper",slideClass:"product-thumb-small_slide",direction:"horizontal",slidesPerView:"auto",spaceBetween:0});Object.assign(l,{thumbs:{swiper:O,slideThumbActiveClass:"is-active"}})}}new e(u,l)}}function Ie(){if(!new URLSearchParams(window.location.search).has(N))return;function t(m,u){m&&(m.style.display=u?"flex":"none")}const n=document.getElementById("free-trial"),s=document.getElementById("pre-order");if(!n||!s)return;t(n,!0),t(s,!1);const c=n.querySelector("a");if(!c)return;const r=new URL(c.href);r.searchParams.set(N,"true"),c.href=r.toString()}function Pe(){if(!new URLSearchParams(window.location.search).has(J))return;function t(l,w){l&&(l.style.display=w?"flex":"none")}const n=document.getElementById("free-trial"),s=document.getElementById("pre-order"),c=document.getElementById("activation-offer");if(!n||!s||!c)return;t(n,!1),t(s,!1),t(c,!0);const r=c.querySelector("a");if(!r)return;const m=P()?"https://accounts.development.listenalphabeats.nl":"https://accounts.listenalphabeats.com",u=_(),a=new URL("/sign-up",m);a.searchParams.set("bundleType","subscription-only"),a.searchParams.set("plan","YEARLY"),a.searchParams.set("discountName","15% Muse partner discount"),a.searchParams.set("amountOff",u.amountOff.toString()),a.searchParams.set("couponId",u.couponId),a.searchParams.set("trialBadge","7-day free trial included"),r.href=a.toString()}function Oe(){const e={usat:{discountName:"USAT 15% Off",couponId:P()?"pdSuKVbv":"cpvIXqMd",percentOff:"15"}};if(!window.location.pathname.includes(`/${L}/`))return;const t=document.querySelectorAll("#payment-upfront"),n=document.querySelectorAll("#payment-klarna"),s=document.querySelectorAll("#product-buy-primary-btn");function c(){const o=window.location.pathname.split(`/${L}/`)[1];if(o)return W(o),o}function r(o,S){o==null||o.classList[S?"add":"remove"]("active")}const m=c();if(!m||!e[m])return;const u=e[m];let a="";function l(){if(!m||!e[m])return;const o=P()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up",S=new URLSearchParams([["partner",m],["couponId",u.couponId],["discountName",u.discountName]]);u.amountOff?S.append("amountOff",u.amountOff):u.percentOff&&S.append("percentOff",u.percentOff),a&&S.append("paymentProvider",a),s.forEach(E=>E.href=`${o}?${S}`)}function w(){a="",t.forEach(o=>r(o,!0)),n.forEach(o=>r(o,!1)),l()}function O(){a="klarna",t.forEach(o=>r(o,!1)),n.forEach(o=>r(o,!0)),l()}t.forEach(o=>o.addEventListener("click",w)),n.forEach(o=>o.addEventListener("click",O)),l()}function Ee(){window.location.pathname==="/partners/amaze"&&z({path:"/product",searchParams:new URLSearchParams({offer:X,tabIndex:"1"})})}return x(),V(),me(),document.addEventListener("DOMContentLoaded",()=>{G({callback:D,fallback:D,timeout:4e3})}),i.PARTNERS_PATH=L,i.conditionalCookieBanner=x,i.getCookie=j,i.getPartnerNameInStorage=le,i.getSearchParam=R,i.guardCioFormsWithRecaptcha=V,i.handleCart=Se,i.handleImageCarousel=we,i.handleInitialTab=ye,i.handleMuseInBoxBadge=Z,i.handleMuseInBoxOffer=Ie,i.handleMusePartnerDiscount=Pe,i.handleNewsletterDiscountPopup=D,i.handlePartnerLanding=Oe,i.isGooglebot=H,i.isStaging=P,i.parsePriceValue=M,i.redirectAmazeToProduct=Ee,i.redirectToPartnerPage=de,i.redirectWithParams=z,i.runAfterConsentResolved=G,i.runWhenAvailable=U,i.safeDecodeURIComponent=K,i.setActive=h,i.setActiveTab=Q,i.setDisplay=p,i.setPartnerNameInStorage=W,i.setSearchParam=fe,i.showOfferBadge=T,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),i}({});
