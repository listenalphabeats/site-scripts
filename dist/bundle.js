var ab=function(i){"use strict";var q=(e=>(e.RewardfulReferral="rewardful.referral",e))(q||{}),g=(e=>(e.SUBSCRIPTION_ONLY="subscription-only",e.MUSE_IN_BOX="muse-in-box",e.BRAINBIT="brainbit",e.MUSE="muse",e))(g||{});function Y(e){function t(n){try{const s=decodeURIComponent(n);return encodeURIComponent(s)!==n}catch{return!1}}return t(e)?decodeURIComponent(e):e}function $(e){e+="=";const n=document.cookie.split(";").find(l=>l.trim().substring(0,e.length)===e);return n?JSON.parse(Y(n.trim().substring(e.length))):null}function K(){return/Googlebot/.test(window.navigator.userAgent)}function P(){return window.location.host==="staging-alphabeats.webflow.io"}function j({callback:e,fallback:t,timeout:n=18e3}){const s=Date.now(),l=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(l),window.FsCC.store.confirmed){e();return}const c=()=>{var u;(u=window.FsCC)!=null&&u.store.confirmed&&(clearTimeout(f),e())},f=setTimeout(()=>{var u,a;(a=(u=window.FsCC)==null?void 0:u.consentController)==null||a.off("updateconsents",c),t()},n);window.FsCC.consentController.on("updateconsents",c)}else Date.now()-s>=n&&(clearInterval(l),t())},500)}function H(){const e=P()?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",t=P()?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.com/v1/forms",n=document.createElement("script");n.async=!0,n.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,document.head.appendChild(n);function s(){const a=document.querySelector(".grecaptcha-badge");a&&(a.style.right="-100%",setTimeout(()=>{a.style.visibility="visible"},400))}function l(a){const d=document.querySelector(".grecaptcha-badge");d&&(d.style.right={visible:"-186px",hidden:"-100%"}[a])}let c=!1;function f(){c=!1,l("hidden")}async function u(a){var p,y;const d=a.target,w=d.dataset.cioFormId;function I(){a.preventDefault(),a.stopPropagation()}if(c||!d.checkValidity()||!w)return;I();const o=(p=window.grecaptcha)==null?void 0:p.enterprise;if(!(o!=null&&o.execute)){(y=window.Sentry)==null||y.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}c=!0;const r=Object.fromEntries(new FormData(d)),b=Object.keys(r).filter(S=>S.includes("email"));b.length&&b.forEach(S=>r[S]=String(r[S]).toLowerCase()),o.ready(()=>{o.execute(e,{action:"submit"}).then(E=>{const k={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:r,recaptchaToken:E})};return fetch(`${t}/${w}/submit`,k)}).then(()=>{f()}).catch(E=>{var B;(B=window.Sentry)==null||B.captureException(E),f()});const S=d.querySelector('input[type="submit"]');S?S.click():d.submit()})}document.addEventListener("submit",a=>{u(a),f()}),window.addEventListener("load",function(){s(),[...document.forms].forEach(a=>{a.addEventListener("submit",d=>{u(d)}),a.dataset.cioFormId&&(a.addEventListener("focusin",()=>{l("visible")}),a.addEventListener("focusout",()=>setTimeout(()=>l("hidden"),4e3)))})})}const A="partners";function G(e){localStorage.setItem("partner",e)}function ie(){return localStorage.getItem("partner")}function se(e){return window.location.replace(`/${A}/${e}`)}function V(e){const t=new URL(e.path,window.location.origin);e.searchParams&&(t.search=String(e.searchParams)),window.location.replace(String(t))}function ce(e,t){const n=new URL(window.location.href);n.searchParams.set(e,t),window.history.replaceState({},"",n)}function v(e){return new URLSearchParams(window.location.search).get(e)}function N({getMethod:e,callback:t,interval:n=100,timeout:s=2e3}){const l=Date.now(),c=setInterval(()=>{typeof e()=="function"?(clearInterval(c),t()):Date.now()-l>=s&&(clearInterval(c),console.warn(`method is not available after ${s}ms`))},n)}function T(){var o,r,b;const e="discount-modal-a",t="discount-modal-background-a",n="discount-modal-close-button-a",s="discount-form-a",l="formSubmittedAt",c="formDismissedAt";function f(p){const y={show:"flex",hide:"none"}[p],S=document.getElementById(e);S&&(S.style.display=y)}function u(){f("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function a(){f("hide")}function d(){localStorage.setItem(l,String(new Date().getTime()));const p=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");p&&(p.removeAttribute("href"),p.addEventListener("click",a))}function w(){localStorage.setItem(c,String(new Date().getTime())),a()}if(K()||$(q.RewardfulReferral)||localStorage.getItem(l))return;const I=localStorage.getItem(c);I&&new Date().getTime()-Number(I)<864e5||(setTimeout(u,2e3),(o=document.getElementById(s))==null||o.addEventListener("submit",d),(r=document.getElementById(n))==null||r.addEventListener("click",w),(b=document.getElementById(t))==null||b.addEventListener("click",w))}function W(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",t.setAttribute("fs-cc-domain",".listenalphabeats.com"),t.setAttribute("fs-cc-mode","opt-in"),t.async=!0;const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",n.async=!0,document.head.appendChild(t),document.head.appendChild(n)}const C="is-internal";function ue(){const t=new URLSearchParams(window.location.search).get(C);t==="true"?le():t==="false"&&de()}function le(){N({getMethod:()=>{var e;return(e=window.posthog)==null?void 0:e.capture},callback:()=>{var e,t;console.debug(`Setting ${C} to true`),(e=window.posthog)==null||e.setPersonPropertiesForFlags({[C]:!0}),(t=window.posthog)==null||t.reloadFeatureFlags()}})}function de(){N({getMethod:()=>{var e;return(e=window.posthog)==null?void 0:e.capture},callback:()=>{var e,t;console.debug(`Setting ${C} to false`),(e=window.posthog)==null||e.setPersonPropertiesForFlags({[C]:!1}),(t=window.posthog)==null||t.reloadFeatureFlags()}})}const R="in-box-offer",fe="generic",z="ces-discount",me="musers-feb";function _(){return{discountName:"Limited Time Special Discount",couponId:P()?"mhAenRNG":"70LO0cr8",amountOff:100}}function U(){return{discountName:"Limited Time Special Discount",couponId:P()?"HmBrVIcf":"4WDuUowk",amountOff:250}}function D(){return{discountName:"20% off the annual membership",couponId:P()?"zQ6JJHDP":"gI3zXMpo",amountOff:19.8}}function L(e){if(!e)return;const t=e.textContent;if(!t)return;const n=t.match(/\$(\d+(?:\.\d{2})?)/);if(n)return Number(n[1])}function X(e,t){const n=document.querySelectorAll(e);if(!n)return;const s=n[t];s&&setTimeout(()=>s.click())}function pe(e){const t=new URLSearchParams(window.location.search);if(!t.has(e.searchParamName))return;const n=t.get(e.searchParamName);n&&X(e.tabSelector,Number(n))}function h(e,t){e==null||e.classList[t?"add":"remove"]("active")}function m(e,t){e&&(e.style.display=t?"flex":"none")}function J(){if(!new URLSearchParams(window.location.search).has(R))return;const t=document.getElementById("badge-annual-sub-offer"),n=document.getElementById("badge-annual-sub-month-trial");m(t,!1),m(n,!0)}function M(e,t){var s;const n=document.querySelector(e);(s=n==null?void 0:n.lastElementChild)!=null&&s.textContent&&(n.lastElementChild.textContent=t,n.style.display="flex")}function he(){var f,u,a,d,w,I,o;const e={imageSetDefault:document.getElementById("default-product-image-carousel"),imageSetMuse:document.getElementById(g.MUSE+"-product-image-carousel"),imageSetBrainbit:document.getElementById(g.BRAINBIT+"-product-image-carousel"),subscriptionOnly:document.getElementById(g.SUBSCRIPTION_ONLY),subscriptionOnlyMonthly:document.getElementById(g.SUBSCRIPTION_ONLY+"-monthly"),bundleMuse:document.getElementById("bundle-"+g.MUSE),bundleBrainbit:document.getElementById("bundle-"+g.BRAINBIT),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),primaryBuyButton:document.getElementById("product-buy-primary-btn")},t=v("offer")===z||v("offer")===fe&&((f=window.posthog)==null?void 0:f.isFeatureEnabled("is-generic-offer-on")),n=v("offer")===me,s={discountName:"",amountOff:0,couponId:""},l={[g.SUBSCRIPTION_ONLY]:n?D():s,[g.SUBSCRIPTION_ONLY+"-monthly"]:s,[g.MUSE]:t?_():s,[g.BRAINBIT]:t?U():s};function c(){var Q,x,Z,ee,te,ne;let r=g.SUBSCRIPTION_ONLY,b="YEARLY",p="";function y(){const Ie=P()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up";let O=new URLSearchParams([["bundleType",r],["plan",b]]);if(p&&O.append("paymentProvider",p),b==="YEARLY"){const{discountName:ae,amountOff:oe,couponId:re}=l[r];ae&&O.append("discountName",ae),oe&&O.append("amountOff",String(oe)),re&&O.append("couponId",re),r===g.SUBSCRIPTION_ONLY&&O.append("trialBadge","7-day free trial included");const Ee=new URLSearchParams(window.location.search);r===g.SUBSCRIPTION_ONLY&&Ee.has(R)&&(O.set("bundleType",g.MUSE_IN_BOX),O.set("trialBadge","Muse 1-month free trial included"))}e.primaryBuyButton&&(e.primaryBuyButton.href=`${Ie}?${O}`)}function S(){r=g.SUBSCRIPTION_ONLY,b="YEARLY",m(e.imageSetDefault,!0),m(e.imageSetMuse,!1),m(e.imageSetBrainbit,!1),p="",m(e.paymentKlarna,!1),F(),h(e.subscriptionOnly,!0),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!1),h(e.bundleMuse,!1),y()}function E(){r=g.SUBSCRIPTION_ONLY,b="MONTHLY",m(e.imageSetDefault,!0),m(e.imageSetMuse,!1),m(e.imageSetBrainbit,!1),p="",m(e.paymentKlarna,!1),F(),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!0),h(e.bundleBrainbit,!1),h(e.bundleMuse,!1),y()}function B(){r=g.MUSE,b="YEARLY",m(e.paymentKlarna,!0),m(e.imageSetDefault,!1),m(e.imageSetMuse,!0),m(e.imageSetBrainbit,!1),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!1),h(e.bundleMuse,!0),y()}function k(){r=g.BRAINBIT,b="YEARLY",m(e.paymentKlarna,!0),m(e.imageSetDefault,!1),m(e.imageSetMuse,!1),m(e.imageSetBrainbit,!0),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!0),h(e.bundleMuse,!1),y()}function F(){p="",h(e.paymentUpfront,!0),h(e.paymentKlarna,!1),y()}function we(){p="klarna",h(e.paymentUpfront,!1),h(e.paymentKlarna,!0),y()}(Q=e.subscriptionOnly)==null||Q.addEventListener("click",S),(x=e.subscriptionOnlyMonthly)==null||x.addEventListener("click",E),(Z=e.bundleMuse)==null||Z.addEventListener("click",B),(ee=e.bundleBrainbit)==null||ee.addEventListener("click",k),(te=e.paymentUpfront)==null||te.addEventListener("click",F),(ne=e.paymentKlarna)==null||ne.addEventListener("click",we),t?B():S(),y()}if(c(),J(),t){M("#bundle-muse .offer-badge-hidden",_().discountName+" applied"),M("#bundle-brainbit .offer-badge-hidden",U().discountName+" applied");const r=(u=e.bundleMuse)==null?void 0:u.querySelector(".price.text-style-strikethrough"),b=r&&L(r);if(b){const S=b-_().amountOff,E=(a=e.bundleMuse)==null?void 0:a.querySelector(".price.to-pay");E&&(E.textContent=`$${S}`,m(r,!0))}const p=(d=e.bundleBrainbit)==null?void 0:d.querySelector(".price.text-style-strikethrough"),y=p&&L(p);if(y){const S=y-U().amountOff,E=(w=e.bundleBrainbit)==null?void 0:w.querySelector(".price.to-pay");E&&(E.textContent=`$${S}`,m(p,!0))}}else if(n){M("#badge-annual-sub-offer",D().discountName+" applied");const r=(I=e.subscriptionOnly)==null?void 0:I.querySelector(".price.text-style-strikethrough"),b=r&&L(r);if(b){const p=b-D().amountOff,y=(o=e.subscriptionOnly)==null?void 0:o.querySelector(".price.to-pay");y&&(y.textContent=`$${p.toFixed(2)}/year`,m(r,!0))}}}function be(){const{Swiper:e}=window;if(!e)return;const t=document.createElement("style");t.textContent=`
    .product_image_carousel .product-thumb-large_slide {
      width: 100% !important;
    }
  `,document.head.appendChild(t);const n=document.querySelectorAll(".product-image-carousel"),s=document.querySelectorAll(".product_image_carousel");for(const c of n)l(c,!1);for(const c of s)l(c,!0);function l(c,f){const u=c.querySelector(".product-thumb-large_container");if(!e||!u)return;const a=c.querySelector(".swiper-navigation_component.is-product-thumbnail"),d={wrapperClass:"product-thumb-large_wrapper",slideClass:"product-thumb-large_slide",direction:"horizontal",slidesPerView:1,spaceBetween:0,grabCursor:!0,effect:"fade",loop:!0,keyboard:{onlyInViewport:!0,enabled:!0},pagination:{el:a==null?void 0:a.querySelector(".swiper-pagination"),bulletClass:"swiper-pagination_bullet",bulletActiveClass:"is-active",dynamicBullets:!1,clickable:!0}};if(f)Object.assign(d,{fadeEffect:{crossFade:!0}});else{Object.assign(d,{navigation:{nextEl:a==null?void 0:a.querySelector("[data-action=next-slide]"),prevEl:a==null?void 0:a.querySelector("[data-action=prev-slide]")}});const w=c.querySelector(".product-thumb-small_container");if(w){const I=new e(w,{wrapperClass:"product-thumb-small_wrapper",slideClass:"product-thumb-small_slide",direction:"horizontal",slidesPerView:"auto",spaceBetween:0});Object.assign(d,{thumbs:{swiper:I,slideThumbActiveClass:"is-active"}})}}new e(u,d)}}function ge(){if(!new URLSearchParams(window.location.search).has(R))return;function t(f,u){f&&(f.style.display=u?"flex":"none")}const n=document.getElementById("free-trial"),s=document.getElementById("pre-order");if(!n||!s)return;t(n,!0),t(s,!1);const l=n.querySelector("a");if(!l)return;const c=new URL(l.href);c.searchParams.set(R,"true"),l.href=c.toString()}function ye(){const e={usat:{discountName:"USAT 15% Off",couponId:P()?"pdSuKVbv":"cpvIXqMd",percentOff:"15"}};if(!window.location.pathname.includes(`/${A}/`))return;const t=document.querySelectorAll("#payment-upfront"),n=document.querySelectorAll("#payment-klarna"),s=document.querySelectorAll("#product-buy-primary-btn");function l(){const o=window.location.pathname.split(`/${A}/`)[1];if(o)return G(o),o}function c(o,r){o==null||o.classList[r?"add":"remove"]("active")}const f=l();if(!f||!e[f])return;const u=e[f];let a="";function d(){if(!f||!e[f])return;const o=P()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up",r=new URLSearchParams([["partner",f],["couponId",u.couponId],["discountName",u.discountName]]);u.amountOff?r.append("amountOff",u.amountOff):u.percentOff&&r.append("percentOff",u.percentOff),a&&r.append("paymentProvider",a),s.forEach(b=>b.href=`${o}?${r}`)}function w(){a="",t.forEach(o=>c(o,!0)),n.forEach(o=>c(o,!1)),d()}function I(){a="klarna",t.forEach(o=>c(o,!1)),n.forEach(o=>c(o,!0)),d()}t.forEach(o=>o.addEventListener("click",w)),n.forEach(o=>o.addEventListener("click",I)),d()}function Se(){window.location.pathname==="/partners/amaze"&&V({path:"/product",searchParams:new URLSearchParams({offer:z,tabIndex:"1"})})}return W(),H(),ue(),document.addEventListener("DOMContentLoaded",()=>{j({callback:T,fallback:T,timeout:4e3})}),i.PARTNERS_PATH=A,i.conditionalCookieBanner=W,i.getCookie=$,i.getPartnerNameInStorage=ie,i.getSearchParam=v,i.guardCioFormsWithRecaptcha=H,i.handleCart=he,i.handleImageCarousel=be,i.handleInitialTab=pe,i.handleMuseInBoxBadge=J,i.handleMuseInBoxOffer=ge,i.handleNewsletterDiscountPopup=T,i.handlePartnerLanding=ye,i.isGooglebot=K,i.isStaging=P,i.parsePriceValue=L,i.redirectAmazeToProduct=Se,i.redirectToPartnerPage=se,i.redirectWithParams=V,i.runAfterConsentResolved=j,i.runWhenAvailable=N,i.safeDecodeURIComponent=Y,i.setActive=h,i.setActiveTab=X,i.setDisplay=m,i.setPartnerNameInStorage=G,i.setSearchParam=ce,i.showOfferBadge=M,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),i}({});
