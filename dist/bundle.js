var ab=function(l){"use strict";var T=(o=>(o.RewardfulReferral="rewardful.referral",o))(T||{});function _(o){function e(t){try{const m=decodeURIComponent(t);return encodeURIComponent(m)!==t}catch{return!1}}return e(o)?decodeURIComponent(o):o}function k(o){o+="=";const t=document.cookie.split(";").find(h=>h.trim().substring(0,o.length)===o);return t?JSON.parse(_(t.trim().substring(o.length))):null}const B="newsletterDiscountParams";function R(){return localStorage.getItem(B)}function U(){return/Googlebot/.test(window.navigator.userAgent)}function I(){return window.location.host==="staging-alphabeats.webflow.io"}function F({callback:o,fallback:e,timeout:t=18e3}){const m=Date.now(),h=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(h),window.FsCC.store.confirmed){o();return}const g=()=>{var i;(i=window.FsCC)!=null&&i.store.confirmed&&(clearTimeout(f),o())},f=setTimeout(()=>{var i,n;(n=(i=window.FsCC)==null?void 0:i.consentController)==null||n.off("updateconsents",g),e()},t);window.FsCC.consentController.on("updateconsents",g)}else Date.now()-m>=t&&(clearInterval(h),e())},500)}function M(){const o=I()?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",e=I()?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.com/v1/forms",t=document.createElement("script");t.async=!0,t.src=`https://www.google.com/recaptcha/enterprise.js?render=${o}`,document.head.appendChild(t);function m(){const n=document.querySelector(".grecaptcha-badge");n&&(n.style.right="-100%",setTimeout(()=>{n.style.visibility="visible"},400))}function h(n){const c=document.querySelector(".grecaptcha-badge");c&&(c.style.right={visible:"-186px",hidden:"-100%"}[n])}let g=!1;function f(){g=!1,h("hidden")}async function i(n){var S,P;const c=n.target,r=c.dataset.cioFormId;function u(){n.preventDefault(),n.stopPropagation()}if(g||!c.checkValidity()||!r)return;u();const a=(S=window.grecaptcha)==null?void 0:S.enterprise;if(!(a!=null&&a.execute)){(P=window.Sentry)==null||P.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}g=!0;const d=Object.fromEntries(new FormData(c)),y=Object.keys(d).filter(p=>p.includes("email"));y.length&&y.forEach(p=>d[p]=String(d[p]).toLowerCase()),a.ready(()=>{a.execute(o,{action:"submit"}).then(w=>{const A={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:d,recaptchaToken:w})};return fetch(`${e}/${r}/submit`,A)}).then(()=>{f()}).catch(w=>{var b;(b=window.Sentry)==null||b.captureException(w),f()});const p=c.querySelector('input[type="submit"]');p?p.click():c.submit()})}document.addEventListener("submit",n=>{i(n),f()}),window.addEventListener("load",function(){m(),[...document.forms].forEach(n=>{n.addEventListener("submit",c=>{i(c)}),n.dataset.cioFormId&&(n.addEventListener("focusin",()=>{h("visible")}),n.addEventListener("focusout",()=>setTimeout(()=>h("hidden"),4e3)))})})}const L="partners";function $(o){localStorage.setItem("partner",o)}function N(){return localStorage.getItem("partner")}function q(o){return window.location.replace(`/${L}/${o}`)}function O(){var y,S,P;const e=`couponId=${I()?"8ENDZLrc":"FynlZTlc"}&amountOff=25&discountName=$25 Off Annual Plan`,t="discount-modal-a",m="discount-modal-background-a",h="discount-modal-close-button-a",g="discount-form-a",f="formSubmittedAt",i="formDismissedAt";function n(p){const w={show:"flex",hide:"none"}[p],b=document.getElementById(t);b&&(b.style.display=w)}function c(){n("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function r(){n("hide")}function u(){localStorage.setItem(f,String(new Date().getTime())),localStorage.setItem(B,e);const p=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");p&&(p.removeAttribute("href"),p.addEventListener("click",r))}function a(){localStorage.setItem(i,String(new Date().getTime())),r()}if(U()||!["/","/product","/shop"].includes(window.location.pathname)||k(T.RewardfulReferral)||localStorage.getItem(f))return;const d=localStorage.getItem(i);d&&new Date().getTime()-Number(d)<864e5||(setTimeout(c,2e3),(y=document.getElementById(g))==null||y.addEventListener("submit",u),(S=document.getElementById(h))==null||S.addEventListener("click",a),(P=document.getElementById(m))==null||P.addEventListener("click",a))}function K(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",e.setAttribute("fs-cc-domain",".listenalphabeats.com"),e.setAttribute("fs-cc-mode","opt-in"),e.async=!0;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",t.async=!0,document.head.appendChild(e),document.head.appendChild(t)}function Y(){const o=N();if(o){q(o);return}setTimeout(()=>{h(),g(),f()},200);const e={annual:{price:149,strikedPrice:149},monthly:{price:15.99,strikedPrice:15.99},brainbit:{annual:{price:449,strikedPrice:449},monthly:{price:499,strikedPrice:499}}},t={annualButton:document.getElementById("plan-annual"),monthlyButton:document.getElementById("plan-monthly"),headbandYes:document.getElementById("headband-yes"),headbandNo:document.getElementById("headband-no"),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),annualFeatures:document.querySelectorAll(".annual-feature"),primaryButtonDesktop:document.getElementById("product-buy-primary-btn")};function m(i,n,c){if(!i)return;const r=i.querySelector(".price-strikethrough"),u=i.querySelector(".price");r&&(r.innerText="$"+n.toFixed(2),r.style.display=n===c?"none":"block"),u&&(u.innerText="$"+c.toFixed(2))}function h(){m(t.annualButton,e.annual.strikedPrice,e.annual.price),m(t.monthlyButton,e.monthly.strikedPrice,e.monthly.price),m(t.headbandYes,e.brainbit.annual.strikedPrice,e.brainbit.annual.price)}function g(){var A,v,C,D;const i=document.getElementById("discount-badge"),n=document.getElementById("discount-badge-title");function c(s){i==null||i.setAttribute("style","display: flex;"),n&&(n.textContent=s)}const r=k(T.RewardfulReferral),u=R(),a=Number(new URLSearchParams(u||"").get("percentOff")||0),d=Number(new URLSearchParams(u||"").get("amountOff")||0),y=((A=r==null?void 0:r.coupon)==null?void 0:A.percent_off)||0,S=((v=r==null?void 0:r.coupon)==null?void 0:v.amount_off)||0,P=e.annual.price*(a/100),p=e.annual.price*(y/100),w=Math.max(P,p,d,S);if(w===0)return;let b="";if(S===w)b=((C=r==null?void 0:r.coupon)==null?void 0:C.name)||"";else if(d===w)b=new URLSearchParams(u||"").get("discountName")||"",e.annual.price-=d,m(t.annualButton,e.annual.strikedPrice,e.annual.price);else{b=(a>y?new URLSearchParams(u||"").get("discountName"):(D=r==null?void 0:r.coupon)==null?void 0:D.name)||"Discount";const E=1-Math.max(a,y)/100;e.annual.price*=E,e.monthly.price*=E,e.brainbit.annual.price*=E,e.brainbit.monthly.price*=E,h()}c(b)}function f(){var w,b,A,v,C,D;const i=I()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up";let n="YEARLY",c="",r=!0;function u(s,E){s==null||s.classList[E?"add":"remove"]("active")}function a(s,E){s&&(s.style.display=E?"flex":"none")}function d(){let s=`${i}?plan=${n}`;const E=R();E&&n==="YEARLY"&&(s+=`&${E}`),c&&(s+=`&paymentProvider=${c}`),r||(s+="&includeBrainbit=false"),t.primaryButtonDesktop&&(t.primaryButtonDesktop.href=s)}function y(s){n=s?"YEARLY":"MONTHLY",u(t.annualButton,s),u(t.monthlyButton,!s),t.annualFeatures.forEach(E=>a(E,s&&(E!==t.paymentKlarna||r))),P(),s?m(t.headbandYes,e.brainbit.annual.strikedPrice,e.brainbit.annual.price):m(t.headbandYes,e.brainbit.monthly.strikedPrice,e.brainbit.monthly.price)}function S(s){r=s,u(t.headbandYes,s),u(t.headbandNo,!s),t.paymentKlarna&&a(t.paymentKlarna,s&&n!=="MONTHLY"),P()}function P(){c="",u(t.paymentUpfront,!0),u(t.paymentKlarna,!1),d()}function p(){c="klarna",u(t.paymentUpfront,!1),u(t.paymentKlarna,!0),d()}(w=t.annualButton)==null||w.addEventListener("click",()=>y(!0)),(b=t.monthlyButton)==null||b.addEventListener("click",()=>y(!1)),(A=t.headbandYes)==null||A.addEventListener("click",()=>S(!0)),(v=t.headbandNo)==null||v.addEventListener("click",()=>S(!1)),(C=t.paymentUpfront)==null||C.addEventListener("click",P),(D=t.paymentKlarna)==null||D.addEventListener("click",p),d()}}function j(){const o={amaze:{discountName:"Amaze Creator Bundle discount",couponId:I()?"YiM3PNXT":"Gu2jGXBe",amountOff:"199"},usat:{discountName:"USAT 15% Off",couponId:I()?"YcvRrNe2":"9xjBd0Rf",percentOff:"15"}};if(!window.location.pathname.includes(`/${L}/`))return;const e=document.querySelectorAll("#payment-upfront"),t=document.querySelectorAll("#payment-klarna"),m=document.querySelectorAll("#product-buy-primary-btn");function h(){const a=window.location.pathname.split(`/${L}/`)[1];if(a)return $(a),a}function g(a,d){a==null||a.classList[d?"add":"remove"]("active")}const f=h();if(!f||!o[f])return;const i=o[f];let n="";function c(){if(!f||!o[f])return;const a=I()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up",d=new URLSearchParams([["partner",f],["couponId",i.couponId],["discountName",i.discountName]]);i.amountOff?d.append("amountOff",i.amountOff):i.percentOff&&d.append("percentOff",i.percentOff),n&&d.append("paymentProvider",n),m.forEach(y=>y.href=`${a}?${d}`)}function r(){n="",e.forEach(a=>g(a,!0)),t.forEach(a=>g(a,!1)),c()}function u(){n="klarna",e.forEach(a=>g(a,!1)),t.forEach(a=>g(a,!0)),c()}e.forEach(a=>a.addEventListener("click",r)),t.forEach(a=>a.addEventListener("click",u)),c()}return K(),M(),document.addEventListener("DOMContentLoaded",()=>{N()||F({callback:O,fallback:O,timeout:4e3})}),l.NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID=B,l.PARTNERS_PATH=L,l.conditionalCookieBanner=K,l.getCookie=k,l.getNewsletterDiscountParams=R,l.getPartnerNameInStorage=N,l.guardCioFormsWithRecaptcha=M,l.handleCartWithDiscount=Y,l.handleNewsletterDiscountPopup=O,l.handlePartnerLanding=j,l.isGooglebot=U,l.isStaging=I,l.redirectToPartnerPage=q,l.runAfterConsentResolved=F,l.safeDecodeURIComponent=_,l.setPartnerNameInStorage=$,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),l}({});
