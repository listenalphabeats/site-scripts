var T=(e=>(e.RewardfulReferral="rewardful.referral",e))(T||{});function safeDecodeURIComponent(e){return V(e)?decodeURIComponent(e):e}function V(e){try{const t=decodeURIComponent(e);return encodeURIComponent(t)!==e}catch{return!1}}function getCookie(e){e+="=";const n=document.cookie.split(";").find(o=>o.trim().substring(0,e.length)===e);return n?JSON.parse(safeDecodeURIComponent(n.trim().substring(e.length))):null}const NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID="newsletterDiscountParams";function getNewsletterDiscountParams(){return localStorage.getItem(NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID)}function isGooglebot(){return/Googlebot/.test(window.navigator.userAgent)}function runAfterConsentResolved({callback:e,fallback:t,timeout:n=18e3}){const s=Date.now(),o=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(o),window.FsCC.store.confirmed){e();return}const i=()=>{var a;(a=window.FsCC)!=null&&a.store.confirmed&&(clearTimeout(c),e())},c=setTimeout(()=>{var a,f;(f=(a=window.FsCC)==null?void 0:a.consentController)==null||f.off("updateconsents",i),t()},n);window.FsCC.consentController.on("updateconsents",i)}else Date.now()-s>=n&&(clearInterval(o),t())},500)}function runWhenAvailable(e,t,n=100,s=4e3){const o=Date.now();function i(){typeof window[e]=="function"?t():Date.now()-o<s?setTimeout(i,n):console.error(`${e} is not available after ${s}ms`)}i()}function runWhenPostHogIsReady({getFeatureFlag:e,callback:t,fallback:n,timeout:s=2e3}){const o=Date.now(),i=setInterval(()=>{e()!==void 0?(clearInterval(i),t()):Date.now()-o>=s&&(clearInterval(i),n())},500)}function handleNewsletterDiscountPopup(){var S,L,P;const e="couponId=ZdKIcH6B&percentOff=10&discountName=10% Newsletter Discount",t="discount-modal",n="discount-modal-background",s="discount-modal-close-button",o="discount-form",i="formSubmittedAt",c="formDismissedAt";function a(u){const R={show:"flex",hide:"none"}[u],F=document.getElementById(t);F&&(F.style.display=R)}function f(){a("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function p(){a("hide")}function b(){localStorage.setItem(i,String(new Date().getTime())),localStorage.setItem(NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID,e);const u=document.querySelector(".popup-modal_success-message-wrapper a");u&&(u.removeAttribute("href"),u.addEventListener("click",p))}function g(){localStorage.setItem(c,String(new Date().getTime())),p()}if(isGooglebot()||getCookie(T.RewardfulReferral)||localStorage.getItem(i))return;const y=localStorage.getItem(c);if(y&&new Date().getTime()-Number(y)<24*60*60*1e3)return;const m=4e3;function r(){var u;return(u=window.posthog)==null?void 0:u.getFeatureFlag("newsletter-discount-popup-timeout-2")}function h(){const u=r()==="test-15sec-delay"?15e3:m;setTimeout(f,u)}function D(){setTimeout(f,m)}runWhenPostHogIsReady({getFeatureFlag:r,callback:h,fallback:D}),(S=document.getElementById(o))==null||S.addEventListener("submit",b),(L=document.getElementById(s))==null||L.addEventListener("click",g),(P=document.getElementById(n))==null||P.addEventListener("click",g)}function setSubmitBtnsDisabledAttr(e){document.querySelectorAll('form input[type="submit"]').forEach(function(n){e?n.setAttribute("disabled","true"):n.removeAttribute("disabled")})}function recaptchaCallback(){setSubmitBtnsDisabledAttr(!1)}function O(e){const t=document.getElementById(e),n=document.querySelector(`#${e} .recaptcha-wrapper`);!t||!n||(n.style.display=t.checkValidity()?"flex":"none")}function showRecaptchaOnValidForm(e){const t=document.querySelector(`#${e} input[type=email]`),n=document.querySelector(`#${e} input[type=checkbox]`);t==null||t.addEventListener("input",()=>O(e)),n==null||n.addEventListener("change",()=>O(e))}function handleDiscount(){setTimeout(()=>W(),400)}function W(){var A,v,x,_;const e=document.getElementById("title-price"),t=document.getElementById("discount-badge"),n=document.getElementById("discount-badge-title"),s=e==null?void 0:e.querySelector("span"),o=document.getElementById("title-price-mob"),i=o==null?void 0:o.querySelector("span"),c=document.getElementById("year-bundle-price"),a=document.getElementById("month-bundle-price");function f(){var I,C,k,$,B;const d=parseFloat(((I=s==null?void 0:s.textContent)==null?void 0:I.replace("$",""))||"689"),l=parseFloat(((k=(C=e==null?void 0:e.childNodes)==null?void 0:C[1].nodeValue)==null?void 0:k.trim().replace("$",""))||"499"),E=parseFloat((($=c==null?void 0:c.textContent)==null?void 0:$.split("$")[1])||"499"),w=parseFloat(((B=a==null?void 0:a.textContent)==null?void 0:B.split("$")[1])||"365.99");return{titleStrikedPrice:d,titleCurrentPrice:l,yearBundlePrice:E,monthBundlePrice:w}}function p(d,l,E){if(E){const w=E.textContent;w&&(E.innerHTML=w.replace(/\$[0-9,.]+/,`<span class="text-style-strikethrough text-color-neutral-82 text-weight-normal">$${d.toFixed(2)}</span> $${l.toFixed(2)}`))}}function b(d,l){e&&(s&&(s.textContent=`$${d.toFixed(2)}`),e.childNodes[1].nodeValue=` $${l.toFixed(2)}`),o&&(i&&(i.textContent=`$${d.toFixed(2)}`),o.childNodes[1].nodeValue=` $${l.toFixed(2)}`)}function g(d,l,E=!1){const w=d.titleCurrentPrice,I=d.yearBundlePrice,C=d.monthBundlePrice;E?(b(w,w*l),p(I,I*l,c),p(C,C*l,a)):(b(w,w-l),p(I,I-l,c),p(C,C-l,a))}function y(d){t==null||t.setAttribute("style","display: flex;"),n&&(n.textContent=d)}const m=f(),r=getCookie(T.RewardfulReferral),h=getNewsletterDiscountParams(),D=Number(new URLSearchParams(h||"").get("percentOff")||0),S=((A=r==null?void 0:r.coupon)==null?void 0:A.percent_off)||0,L=((v=r==null?void 0:r.coupon)==null?void 0:v.amount_off)||0,P=m.yearBundlePrice,u=P*(D/100),R=P*(S/100),F=Math.max(u,R,L);if(F!==0)if(L===F)g(m,L),t==null||t.setAttribute("style","display: flex;"),y(((x=r==null?void 0:r.coupon)==null?void 0:x.name)||"");else{const d=1-Math.max(D,S)/100;g(m,d,!0);const l=(D>S?new URLSearchParams(h||"").get("discountName"):(_=r==null?void 0:r.coupon)==null?void 0:_.name)||"Discount";y(l)}}function handleAddToCartPricing(){const e="https://accounts.listenalphabeats.com/sign-up";let t="YEARLY",n="";const s=document.getElementById("plan-annual"),o=document.getElementById("plan-monthly"),i=document.getElementById("payment-upfront"),c=document.getElementById("payment-klarna"),a=document.getElementById("product-buy-primary-btn"),f=document.getElementById("product-buy-primary-btn-mobile");function p(){t="YEARLY",n="",o==null||o.classList.remove("active"),s==null||s.classList.add("active"),c==null||c.classList.remove("disabled"),g(),m()}function b(){t="MONTHLY",s==null||s.classList.remove("active"),o==null||o.classList.add("active"),c==null||c.classList.add("disabled"),g(),m()}function g(){n="",c==null||c.classList.remove("active"),i==null||i.classList.add("active"),m()}function y(){n="klarna",i==null||i.classList.remove("active"),c==null||c.classList.add("active"),m()}function m(){let r=e+"?plan="+t;const h=getNewsletterDiscountParams();h&&(r+="&"+h),n&&(r+="&paymentProvider="+n),a&&(a.href=r),f&&(f.href=r)}s==null||s.addEventListener("click",p),o==null||o.addEventListener("click",b),i==null||i.addEventListener("click",g),c==null||c.addEventListener("click",y),m()}window.addEventListener("load",()=>{setSubmitBtnsDisabledAttr(!0)});;