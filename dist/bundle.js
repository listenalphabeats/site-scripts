var ab=function(p){"use strict";var v=(e=>(e.RewardfulReferral="rewardful.referral",e))(v||{});function T(e){function t(i){try{const h=decodeURIComponent(i);return encodeURIComponent(h)!==i}catch{return!1}}return t(e)?decodeURIComponent(e):e}function P(e){e+="=";const i=document.cookie.split(";").find(g=>g.trim().substring(0,e.length)===e);return i?JSON.parse(T(i.trim().substring(e.length))):null}const B="newsletterDiscountParams";function L(){return localStorage.getItem(B)}function O(){return/Googlebot/.test(window.navigator.userAgent)}function I(){return window.location.host==="staging-alphabeats.webflow.io"}function N({callback:e,fallback:t,timeout:i=18e3}){const h=Date.now(),g=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(g),window.FsCC.store.confirmed){e();return}const E=()=>{var c;(c=window.FsCC)!=null&&c.store.confirmed&&(clearTimeout(d),e())},d=setTimeout(()=>{var c,o;(o=(c=window.FsCC)==null?void 0:c.consentController)==null||o.off("updateconsents",E),t()},i);window.FsCC.consentController.on("updateconsents",E)}else Date.now()-h>=i&&(clearInterval(g),t())},500)}function _(){const e=I()?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",t=I()?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.nl/v1/forms",i=document.createElement("script");i.async=!0,i.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,document.head.appendChild(i);function h(){const o=document.querySelector(".grecaptcha-badge");o&&(o.style.right="-100%",setTimeout(()=>{o.style.visibility="visible"},400))}function g(o){const n=document.querySelector(".grecaptcha-badge");n&&(n.style.right={visible:"-186px",hidden:"-100%"}[o])}let E=!1;function d(){E=!1,g("hidden")}async function c(o){var w,C;const n=o.target,s=n.dataset.cioFormId;function S(){o.preventDefault(),o.stopPropagation()}if(E||!n.checkValidity()||!s)return;S();const u=(w=window.grecaptcha)==null?void 0:w.enterprise;if(!(u!=null&&u.execute)){(C=window.Sentry)==null||C.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}E=!0;const l=Object.fromEntries(new FormData(n)),b=Object.keys(l).filter(r=>r.includes("email"));b.length&&b.forEach(r=>l[r]=String(l[r]).toLowerCase()),u.ready(()=>{u.execute(e,{action:"submit"}).then(f=>{const D={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:l,recaptchaToken:f})};return fetch(`${t}/${s}/submit`,D)}).then(()=>{d()}).catch(f=>{var y;(y=window.Sentry)==null||y.captureException(f),d()});const r=n.querySelector('input[type="submit"]');r?r.click():n.submit()})}document.addEventListener("submit",o=>{c(o),d()}),window.addEventListener("load",function(){h(),[...document.forms].forEach(o=>{o.addEventListener("submit",n=>{c(n)}),o.dataset.cioFormId&&(o.addEventListener("focusin",()=>{g("visible")}),o.addEventListener("focusout",()=>setTimeout(()=>g("hidden"),4e3)))})})}function R(){var b,w,C;const t=`couponId=${I()?"8ENDZLrc":"FynlZTlc"}&amountOff=25&discountName=$25 Off Annual Plan`,i="discount-modal-a",h="discount-modal-background-a",g="discount-modal-close-button-a",E="discount-form-a",d="formSubmittedAt",c="formDismissedAt";function o(r){const f={show:"flex",hide:"none"}[r],y=document.getElementById(i);y&&(y.style.display=f)}function n(){o("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function s(){o("hide")}function S(){localStorage.setItem(d,String(new Date().getTime())),localStorage.setItem(B,t);const r=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");r&&(r.removeAttribute("href"),r.addEventListener("click",s))}function u(){localStorage.setItem(c,String(new Date().getTime())),s()}if(O()||!["/","/product","/shop"].includes(window.location.pathname)||P(v.RewardfulReferral)||localStorage.getItem(d))return;const l=localStorage.getItem(c);l&&new Date().getTime()-Number(l)<864e5||(setTimeout(n,2e3),(b=document.getElementById(E))==null||b.addEventListener("submit",S),(w=document.getElementById(g))==null||w.addEventListener("click",u),(C=document.getElementById(h))==null||C.addEventListener("click",u))}function F(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",t.setAttribute("fs-cc-domain",".listenalphabeats.com"),t.setAttribute("fs-cc-mode","opt-in"),t.async=!0;const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",i.async=!0,document.head.appendChild(t),document.head.appendChild(i)}function U(){setTimeout(()=>{h(),g(),E()},200);const e={annual:{price:149,strikedPrice:149},monthly:{price:15.99,strikedPrice:15.99},brainbit:{annual:{price:449,strikedPrice:449},monthly:{price:499,strikedPrice:499}}},t={annualButton:document.getElementById("plan-annual"),monthlyButton:document.getElementById("plan-monthly"),headbandYes:document.getElementById("headband-yes"),headbandNo:document.getElementById("headband-no"),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),annualFeatures:document.querySelectorAll(".annual-feature"),primaryButtonDesktop:document.getElementById("product-buy-primary-btn")};function i(d,c,o){if(!d)return;const n=d.querySelector(".price-strikethrough"),s=d.querySelector(".price");n&&(n.innerText="$"+c.toFixed(2),n.style.display=c===o?"none":"block"),s&&(s.innerText="$"+o.toFixed(2))}function h(){i(t.annualButton,e.annual.strikedPrice,e.annual.price),i(t.monthlyButton,e.monthly.strikedPrice,e.monthly.price),i(t.headbandYes,e.brainbit.annual.strikedPrice,e.brainbit.annual.price)}function g(){var y,D,A,k;const d=document.getElementById("discount-badge"),c=document.getElementById("discount-badge-title");function o(a){d==null||d.setAttribute("style","display: flex;"),c&&(c.textContent=a)}const n=P(v.RewardfulReferral),s=L(),S=Number(new URLSearchParams(s||"").get("percentOff")||0),u=Number(new URLSearchParams(s||"").get("amountOff")||0),l=((y=n==null?void 0:n.coupon)==null?void 0:y.percent_off)||0,b=((D=n==null?void 0:n.coupon)==null?void 0:D.amount_off)||0,w=e.annual.price*(S/100),C=e.annual.price*(l/100),r=Math.max(w,C,u,b);if(r===0)return;let f="";if(b===r)f=((A=n==null?void 0:n.coupon)==null?void 0:A.name)||"";else if(u===r)f=new URLSearchParams(s||"").get("discountName")||"",e.annual.price-=u,i(t.annualButton,e.annual.strikedPrice,e.annual.price);else{f=(S>l?new URLSearchParams(s||"").get("discountName"):(k=n==null?void 0:n.coupon)==null?void 0:k.name)||"Discount";const m=1-Math.max(S,l)/100;e.annual.price*=m,e.monthly.price*=m,e.brainbit.annual.price*=m,e.brainbit.monthly.price*=m,h()}o(f)}function E(){var r,f,y,D,A,k;const d=I()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up";let c="YEARLY",o="",n=!0;function s(a,m){a==null||a.classList[m?"add":"remove"]("active")}function S(a,m){a&&(a.style.display=m?"flex":"none")}function u(){let a=`${d}?plan=${c}`;const m=L();m&&c==="YEARLY"&&(a+=`&${m}`),o&&(a+=`&paymentProvider=${o}`),n||(a+="&includeBrainbit=false"),t.primaryButtonDesktop&&(t.primaryButtonDesktop.href=a)}function l(a){c=a?"YEARLY":"MONTHLY",s(t.annualButton,a),s(t.monthlyButton,!a),t.annualFeatures.forEach(m=>S(m,a&&(m!==t.paymentKlarna||n))),w(),a?i(t.headbandYes,e.brainbit.annual.strikedPrice,e.brainbit.annual.price):i(t.headbandYes,e.brainbit.monthly.strikedPrice,e.brainbit.monthly.price)}function b(a){n=a,s(t.headbandYes,a),s(t.headbandNo,!a),t.paymentKlarna&&S(t.paymentKlarna,a&&c!=="MONTHLY"),w()}function w(){o="",s(t.paymentUpfront,!0),s(t.paymentKlarna,!1),u()}function C(){o="klarna",s(t.paymentUpfront,!1),s(t.paymentKlarna,!0),u()}(r=t.annualButton)==null||r.addEventListener("click",()=>l(!0)),(f=t.monthlyButton)==null||f.addEventListener("click",()=>l(!1)),(y=t.headbandYes)==null||y.addEventListener("click",()=>b(!0)),(D=t.headbandNo)==null||D.addEventListener("click",()=>b(!1)),(A=t.paymentUpfront)==null||A.addEventListener("click",w),(k=t.paymentKlarna)==null||k.addEventListener("click",C),u()}}return F(),_(),document.addEventListener("DOMContentLoaded",()=>{N({callback:R,fallback:R,timeout:4e3})}),p.NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID=B,p.conditionalCookieBanner=F,p.getCookie=P,p.getNewsletterDiscountParams=L,p.guardCioFormsWithRecaptcha=_,p.handleCartWithDiscount=U,p.handleNewsletterDiscountPopup=R,p.isGooglebot=O,p.isStaging=I,p.runAfterConsentResolved=N,p.safeDecodeURIComponent=T,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),p}({});
