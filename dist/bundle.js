var ab=function(o){"use strict";var Y=(e=>(e.RewardfulReferral="rewardful.referral",e))(Y||{}),g=(e=>(e.SUBSCRIPTION_ONLY="subscription-only",e.MUSE_IN_BOX="muse-in-box",e.BRAINBIT="brainbit",e.MUSE="muse",e))(g||{});function $(e){function t(n){try{const i=decodeURIComponent(n);return encodeURIComponent(i)!==n}catch{return!1}}return t(e)?decodeURIComponent(e):e}function K(e){e+="=";const n=document.cookie.split(";").find(l=>l.trim().substring(0,e.length)===e);return n?JSON.parse($(n.trim().substring(e.length))):null}function j(){return/Googlebot/.test(window.navigator.userAgent)}function O(){return window.location.host==="staging-alphabeats.webflow.io"}function G({callback:e,fallback:t,timeout:n=18e3}){const i=Date.now(),l=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(l),window.FsCC.store.confirmed){e();return}const s=()=>{var c;(c=window.FsCC)!=null&&c.store.confirmed&&(clearTimeout(m),e())},m=setTimeout(()=>{var c,a;(a=(c=window.FsCC)==null?void 0:c.consentController)==null||a.off("updateconsents",s),t()},n);window.FsCC.consentController.on("updateconsents",s)}else Date.now()-i>=n&&(clearInterval(l),t())},500)}function H(){const e=O()?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",t=O()?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.com/v1/forms",n=document.createElement("script");n.async=!0,n.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,document.head.appendChild(n);function i(){const a=document.querySelector(".grecaptcha-badge");a&&(a.style.right="-100%",setTimeout(()=>{a.style.visibility="visible"},400))}function l(a){const u=document.querySelector(".grecaptcha-badge");u&&(u.style.right={visible:"-186px",hidden:"-100%"}[a])}let s=!1;function m(){s=!1,l("hidden")}async function c(a){var b,S;const u=a.target,w=u.dataset.cioFormId;function I(){a.preventDefault(),a.stopPropagation()}if(s||!u.checkValidity()||!w)return;I();const r=(b=window.grecaptcha)==null?void 0:b.enterprise;if(!(r!=null&&r.execute)){(S=window.Sentry)==null||S.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}s=!0;const y=Object.fromEntries(new FormData(u)),d=Object.keys(y).filter(f=>f.includes("email"));d.length&&d.forEach(f=>y[f]=String(y[f]).toLowerCase()),r.ready(()=>{r.execute(e,{action:"submit"}).then(E=>{const N={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:y,recaptchaToken:E})};return fetch(`${t}/${w}/submit`,N)}).then(()=>{m()}).catch(E=>{var P;(P=window.Sentry)==null||P.captureException(E),m()});const f=u.querySelector('input[type="submit"]');f?f.click():u.submit()})}document.addEventListener("submit",a=>{c(a),m()}),window.addEventListener("load",function(){i(),[...document.forms].forEach(a=>{a.addEventListener("submit",u=>{c(u)}),a.dataset.cioFormId&&(a.addEventListener("focusin",()=>{l("visible")}),a.addEventListener("focusout",()=>setTimeout(()=>l("hidden"),4e3)))})})}const v="partners";function V(e){localStorage.setItem("partner",e)}function se(){return localStorage.getItem("partner")}function ce(e){return window.location.replace(`/${v}/${e}`)}function W(e){const t=new URL(e.path,window.location.origin);e.searchParams&&(t.search=String(e.searchParams)),window.location.replace(String(t))}function le(e,t){const n=new URL(window.location.href);n.searchParams.set(e,t),window.history.replaceState({},"",n)}function T(e){return new URLSearchParams(window.location.search).get(e)}function M({getMethod:e,callback:t,interval:n=100,timeout:i=2e3}){const l=Date.now(),s=setInterval(()=>{typeof e()=="function"?(clearInterval(s),t()):Date.now()-l>=i&&(clearInterval(s),console.warn(`method is not available after ${i}ms`))},n)}function _(){var r,y,d;const e="discount-modal-a",t="discount-modal-background-a",n="discount-modal-close-button-a",i="discount-form-a",l="formSubmittedAt",s="formDismissedAt";function m(b){const S={show:"flex",hide:"none"}[b],f=document.getElementById(e);f&&(f.style.display=S)}function c(){m("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function a(){m("hide")}function u(){localStorage.setItem(l,String(new Date().getTime()));const b=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");b&&(b.removeAttribute("href"),b.addEventListener("click",a))}function w(){localStorage.setItem(s,String(new Date().getTime())),a()}if(j()||K(Y.RewardfulReferral)||localStorage.getItem(l))return;const I=localStorage.getItem(s);I&&new Date().getTime()-Number(I)<864e5||(setTimeout(c,2e3),(r=document.getElementById(i))==null||r.addEventListener("submit",u),(y=document.getElementById(n))==null||y.addEventListener("click",w),(d=document.getElementById(t))==null||d.addEventListener("click",w))}function z(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",t.setAttribute("fs-cc-domain",".listenalphabeats.com"),t.setAttribute("fs-cc-mode","opt-in"),t.async=!0;const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",n.async=!0,document.head.appendChild(t),document.head.appendChild(n)}const C="is-internal";function ue(){const t=new URLSearchParams(window.location.search).get(C);t==="true"?de():t==="false"&&fe()}function de(){M({getMethod:()=>{var e;return(e=window.posthog)==null?void 0:e.capture},callback:()=>{var e,t;console.debug(`Setting ${C} to true`),(e=window.posthog)==null||e.setPersonPropertiesForFlags({[C]:!0}),(t=window.posthog)==null||t.reloadFeatureFlags()}})}function fe(){M({getMethod:()=>{var e;return(e=window.posthog)==null?void 0:e.capture},callback:()=>{var e,t;console.debug(`Setting ${C} to false`),(e=window.posthog)==null||e.setPersonPropertiesForFlags({[C]:!1}),(t=window.posthog)==null||t.reloadFeatureFlags()}})}const A="in-box-offer",me="generic",X="ces-discount";function U(){return{discountName:"Limited Time Special Discount",couponId:O()?"mhAenRNG":"70LO0cr8",amountOff:100}}function D(){return{discountName:"Limited Time Special Discount",couponId:O()?"HmBrVIcf":"4WDuUowk",amountOff:250}}function k(){return{discountName:"50% Off SuperBowl Deal",couponId:O()?"gmtxMx5q":"osSWNTSD",amountOff:250}}function R(e){if(!e)return;const t=e.textContent;if(!t)return;const n=t.replace("$","");return Number(n)}function F(e,t){const n=document.querySelectorAll(e);if(!n)return;const i=n[t];i&&setTimeout(()=>i.click())}function pe(e){const t=new URLSearchParams(window.location.search);if(!t.has(e.searchParamName))return;const n=t.get(e.searchParamName);n&&F(e.tabSelector,Number(n))}function h(e,t){e==null||e.classList[t?"add":"remove"]("active")}function p(e,t){e&&(e.style.display=t?"flex":"none")}function x(){if(!new URLSearchParams(window.location.search).has(A))return;const t=document.getElementById("badge-annual-sub-offer"),n=document.getElementById("badge-annual-sub-month-trial");p(t,!1),p(n,!0)}function L(e,t){var i;const n=document.querySelector(e);(i=n==null?void 0:n.lastElementChild)!=null&&i.textContent&&(n.lastElementChild.textContent=t,n.style.display="flex")}function be(){var m,c,a,u,w,I,r,y;const e={imageSetDefault:document.getElementById("default-product-image-carousel"),imageSetMuse:document.getElementById(g.MUSE+"-product-image-carousel"),imageSetBrainbit:document.getElementById(g.BRAINBIT+"-product-image-carousel"),subscriptionOnly:document.getElementById(g.SUBSCRIPTION_ONLY),subscriptionOnlyMonthly:document.getElementById(g.SUBSCRIPTION_ONLY+"-monthly"),bundleMuse:document.getElementById("bundle-"+g.MUSE),bundleBrainbit:document.getElementById("bundle-"+g.BRAINBIT),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),primaryBuyButton:document.getElementById("product-buy-primary-btn")},t=T("offer")===X||T("offer")===me&&((m=window.posthog)==null?void 0:m.isFeatureEnabled("is-generic-offer-on")),n=(c=window.posthog)==null?void 0:c.isFeatureEnabled("is-super-bowl-offer-on"),i={discountName:"",amountOff:0,couponId:""},l={[g.SUBSCRIPTION_ONLY]:i,[g.SUBSCRIPTION_ONLY+"-monthly"]:i,[g.MUSE]:t?U():i,[g.BRAINBIT]:t?D():n?k():i};function s(){var J,Z,ee,te,ne,ae;let d=g.SUBSCRIPTION_ONLY,b="YEARLY",S="";function f(){const Ie=O()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up";let B=new URLSearchParams([["bundleType",d],["plan",b]]);if(S&&B.append("paymentProvider",S),b==="YEARLY"){const{discountName:re,amountOff:oe,couponId:ie}=l[d];re&&B.append("discountName",re),oe&&B.append("amountOff",String(oe)),ie&&B.append("couponId",ie),d===g.SUBSCRIPTION_ONLY&&B.append("trialBadge","7-day free trial included");const Pe=new URLSearchParams(window.location.search);d===g.SUBSCRIPTION_ONLY&&Pe.has(A)&&(B.set("bundleType",g.MUSE_IN_BOX),B.set("trialBadge","Muse 1-month free trial included"))}e.primaryBuyButton&&(e.primaryBuyButton.href=`${Ie}?${B}`)}function E(){d=g.SUBSCRIPTION_ONLY,b="YEARLY",p(e.imageSetDefault,!0),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!1),S="",p(e.paymentKlarna,!1),q(),h(e.subscriptionOnly,!0),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!1),h(e.bundleMuse,!1),f()}function P(){d=g.SUBSCRIPTION_ONLY,b="MONTHLY",p(e.imageSetDefault,!0),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!1),S="",p(e.paymentKlarna,!1),q(),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!0),h(e.bundleBrainbit,!1),h(e.bundleMuse,!1),f()}function N(){d=g.MUSE,b="YEARLY",p(e.paymentKlarna,!0),p(e.imageSetDefault,!1),p(e.imageSetMuse,!0),p(e.imageSetBrainbit,!1),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!1),h(e.bundleMuse,!0),f()}function Q(){d=g.BRAINBIT,b="YEARLY",p(e.paymentKlarna,!0),p(e.imageSetDefault,!1),p(e.imageSetMuse,!1),p(e.imageSetBrainbit,!0),h(e.subscriptionOnly,!1),h(e.subscriptionOnlyMonthly,!1),h(e.bundleBrainbit,!0),h(e.bundleMuse,!1),f()}function q(){S="",h(e.paymentUpfront,!0),h(e.paymentKlarna,!1),f()}function we(){S="klarna",h(e.paymentUpfront,!1),h(e.paymentKlarna,!0),f()}(J=e.subscriptionOnly)==null||J.addEventListener("click",E),(Z=e.subscriptionOnlyMonthly)==null||Z.addEventListener("click",P),(ee=e.bundleMuse)==null||ee.addEventListener("click",N),(te=e.bundleBrainbit)==null||te.addEventListener("click",Q),(ne=e.paymentUpfront)==null||ne.addEventListener("click",q),(ae=e.paymentKlarna)==null||ae.addEventListener("click",we),t?N():n?Q():E(),f()}if(s(),x(),t){L("#bundle-muse .offer-badge-hidden",U().discountName+" applied"),L("#bundle-brainbit .offer-badge-hidden",D().discountName+" applied");const d=(a=e.bundleMuse)==null?void 0:a.querySelector(".price.text-style-strikethrough"),b=d&&R(d);if(b){const E=b-U().amountOff,P=(u=e.bundleMuse)==null?void 0:u.querySelector(".price.to-pay");P&&(P.textContent=`$${E}`,p(d,!0))}const S=(w=e.bundleBrainbit)==null?void 0:w.querySelector(".price.text-style-strikethrough"),f=S&&R(S);if(f){const E=f-D().amountOff,P=(I=e.bundleBrainbit)==null?void 0:I.querySelector(".price.to-pay");P&&(P.textContent=`$${E}`,p(S,!0))}}else if(n){L("#bundle-brainbit .offer-badge-hidden",k().discountName+" applied");const d=(r=e.bundleBrainbit)==null?void 0:r.querySelector(".price.text-style-strikethrough"),b=d&&R(d);if(b){const S=b-k().amountOff,f=(y=e.bundleBrainbit)==null?void 0:y.querySelector(".price.to-pay");f&&(f.textContent=`$${S}`,p(d,!0))}F(".product-tabs_tab",1)}}function he(){const{Swiper:e}=window;if(!e)return;const t=document.createElement("style");t.textContent=`
    .product_image_carousel .product-thumb-large_slide {
      width: 100% !important;
    }
  `,document.head.appendChild(t);const n=document.querySelectorAll(".product-image-carousel"),i=document.querySelectorAll(".product_image_carousel");for(const s of n)l(s,!1);for(const s of i)l(s,!0);function l(s,m){const c=s.querySelector(".product-thumb-large_container");if(!e||!c)return;const a=s.querySelector(".swiper-navigation_component.is-product-thumbnail"),u={wrapperClass:"product-thumb-large_wrapper",slideClass:"product-thumb-large_slide",direction:"horizontal",slidesPerView:1,spaceBetween:0,grabCursor:!0,effect:"fade",loop:!0,keyboard:{onlyInViewport:!0,enabled:!0},pagination:{el:a==null?void 0:a.querySelector(".swiper-pagination"),bulletClass:"swiper-pagination_bullet",bulletActiveClass:"is-active",dynamicBullets:!1,clickable:!0}};if(m)Object.assign(u,{fadeEffect:{crossFade:!0}});else{Object.assign(u,{navigation:{nextEl:a==null?void 0:a.querySelector("[data-action=next-slide]"),prevEl:a==null?void 0:a.querySelector("[data-action=prev-slide]")}});const w=s.querySelector(".product-thumb-small_container");if(w){const I=new e(w,{wrapperClass:"product-thumb-small_wrapper",slideClass:"product-thumb-small_slide",direction:"horizontal",slidesPerView:"auto",spaceBetween:0});Object.assign(u,{thumbs:{swiper:I,slideThumbActiveClass:"is-active"}})}}new e(c,u)}}function ge(){if(!new URLSearchParams(window.location.search).has(A))return;function t(m,c){m&&(m.style.display=c?"flex":"none")}const n=document.getElementById("free-trial"),i=document.getElementById("pre-order");if(!n||!i)return;t(n,!0),t(i,!1);const l=n.querySelector("a");if(!l)return;const s=new URL(l.href);s.searchParams.set(A,"true"),l.href=s.toString()}function ye(){const e={usat:{discountName:"USAT 15% Off",couponId:O()?"pdSuKVbv":"cpvIXqMd",percentOff:"15"}};if(!window.location.pathname.includes(`/${v}/`))return;const t=document.querySelectorAll("#payment-upfront"),n=document.querySelectorAll("#payment-klarna"),i=document.querySelectorAll("#product-buy-primary-btn");function l(){const r=window.location.pathname.split(`/${v}/`)[1];if(r)return V(r),r}function s(r,y){r==null||r.classList[y?"add":"remove"]("active")}const m=l();if(!m||!e[m])return;const c=e[m];let a="";function u(){if(!m||!e[m])return;const r=O()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up",y=new URLSearchParams([["partner",m],["couponId",c.couponId],["discountName",c.discountName]]);c.amountOff?y.append("amountOff",c.amountOff):c.percentOff&&y.append("percentOff",c.percentOff),a&&y.append("paymentProvider",a),i.forEach(d=>d.href=`${r}?${y}`)}function w(){a="",t.forEach(r=>s(r,!0)),n.forEach(r=>s(r,!1)),u()}function I(){a="klarna",t.forEach(r=>s(r,!1)),n.forEach(r=>s(r,!0)),u()}t.forEach(r=>r.addEventListener("click",w)),n.forEach(r=>r.addEventListener("click",I)),u()}function Se(){window.location.pathname==="/partners/amaze"&&W({path:"/product",searchParams:new URLSearchParams({offer:X,tabIndex:"1"})})}return z(),H(),ue(),document.addEventListener("DOMContentLoaded",()=>{G({callback:_,fallback:_,timeout:4e3})}),o.PARTNERS_PATH=v,o.conditionalCookieBanner=z,o.getCookie=K,o.getPartnerNameInStorage=se,o.getSearchParam=T,o.guardCioFormsWithRecaptcha=H,o.handleCart=be,o.handleImageCarousel=he,o.handleInitialTab=pe,o.handleMuseInBoxBadge=x,o.handleMuseInBoxOffer=ge,o.handleNewsletterDiscountPopup=_,o.handlePartnerLanding=ye,o.isGooglebot=j,o.isStaging=O,o.parsePriceValue=R,o.redirectAmazeToProduct=Se,o.redirectToPartnerPage=ce,o.redirectWithParams=W,o.runAfterConsentResolved=G,o.runWhenAvailable=M,o.safeDecodeURIComponent=$,o.setActive=h,o.setActiveTab=F,o.setDisplay=p,o.setPartnerNameInStorage=V,o.setSearchParam=le,o.showOfferBadge=L,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),o}({});
