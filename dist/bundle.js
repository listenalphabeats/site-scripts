var ab=function(g){"use strict";var L=(o=>(o.RewardfulReferral="rewardful.referral",o))(L||{}),P=(o=>(o.SUBSCRIPTION_ONLY="subscription-only",o.BRAINBIT="brainbit",o.MUSE="muse",o))(P||{});function M(o){function n(t){try{const h=decodeURIComponent(t);return encodeURIComponent(h)!==t}catch{return!1}}return n(o)?decodeURIComponent(o):o}function k(o){o+="=";const t=document.cookie.split(";").find(d=>d.trim().substring(0,o.length)===o);return t?JSON.parse(M(t.trim().substring(o.length))):null}const R="newsletterDiscountParams";function D(){return localStorage.getItem(R)}function _(){return/Googlebot/.test(window.navigator.userAgent)}function v(){return window.location.host==="staging-alphabeats.webflow.io"}function Y({callback:o,fallback:n,timeout:t=18e3}){const h=Date.now(),d=setInterval(()=>{if(window.FsCC&&window.FsCC.consentController){if(clearInterval(d),window.FsCC.store.confirmed){o();return}const f=()=>{var i;(i=window.FsCC)!=null&&i.store.confirmed&&(clearTimeout(r),o())},r=setTimeout(()=>{var i,e;(e=(i=window.FsCC)==null?void 0:i.consentController)==null||e.off("updateconsents",f),n()},t);window.FsCC.consentController.on("updateconsents",f)}else Date.now()-h>=t&&(clearInterval(d),n())},500)}function F(){const o=v()?"6LcapSQqAAAAAOeM26drG-7e7aEq3Vj6e55WZtEg":"6Ld69iQqAAAAAOG5DHH8-UHywMnTBpgptTbQWDUb",n=v()?"https://api.development.listenalphabeats.nl/v1/forms":"https://api.listenalphabeats.com/v1/forms",t=document.createElement("script");t.async=!0,t.src=`https://www.google.com/recaptcha/enterprise.js?render=${o}`,document.head.appendChild(t);function h(){const e=document.querySelector(".grecaptcha-badge");e&&(e.style.right="-100%",setTimeout(()=>{e.style.visibility="visible"},400))}function d(e){const s=document.querySelector(".grecaptcha-badge");s&&(s.style.right={visible:"-186px",hidden:"-100%"}[e])}let f=!1;function r(){f=!1,d("hidden")}async function i(e){var B,I;const s=e.target,c=s.dataset.cioFormId;function l(){e.preventDefault(),e.stopPropagation()}if(f||!s.checkValidity()||!c)return;l();const a=(B=window.grecaptcha)==null?void 0:B.enterprise;if(!(a!=null&&a.execute)){(I=window.Sentry)==null||I.captureMessage("grecaptcha.enterprise.execute is not available","warning");return}f=!0;const m=Object.fromEntries(new FormData(s)),b=Object.keys(m).filter(y=>y.includes("email"));b.length&&b.forEach(y=>m[y]=String(m[y]).toLowerCase()),a.ready(()=>{a.execute(o,{action:"submit"}).then(E=>{const S={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({data:m,recaptchaToken:E})};return fetch(`${n}/${c}/submit`,S)}).then(()=>{r()}).catch(E=>{var p;(p=window.Sentry)==null||p.captureException(E),r()});const y=s.querySelector('input[type="submit"]');y?y.click():s.submit()})}document.addEventListener("submit",e=>{i(e),r()}),window.addEventListener("load",function(){h(),[...document.forms].forEach(e=>{e.addEventListener("submit",s=>{i(s)}),e.dataset.cioFormId&&(e.addEventListener("focusin",()=>{d("visible")}),e.addEventListener("focusout",()=>setTimeout(()=>d("hidden"),4e3)))})})}const A="partners";function K(o){localStorage.setItem("partner",o)}function C(){return localStorage.getItem("partner")}function U(o){return window.location.replace(`/${A}/${o}`)}function j(){var b,B,I;const n=`couponId=${v()?"8ENDZLrc":"FynlZTlc"}&amountOff=25&discountName=$25 Off Annual Plan`,t="discount-modal-a",h="discount-modal-background-a",d="discount-modal-close-button-a",f="discount-form-a",r="formSubmittedAt",i="formDismissedAt";function e(y){const E={show:"flex",hide:"none"}[y],p=document.getElementById(t);p&&(p.style.display=E)}function s(){e("show"),(window.dataLayer||[]).push({event:"show-newsletter-discount-popup"})}function c(){e("hide")}function l(){localStorage.setItem(r,String(new Date().getTime())),localStorage.setItem(R,n);const y=document.querySelector("#discount-form-a .popup-modal_success-message-wrapper a");y&&(y.removeAttribute("href"),y.addEventListener("click",c))}function a(){localStorage.setItem(i,String(new Date().getTime())),c()}if(_()||!["/","/product","/shop"].includes(window.location.pathname)||k(L.RewardfulReferral)||localStorage.getItem(r))return;const m=localStorage.getItem(i);m&&new Date().getTime()-Number(m)<864e5||(setTimeout(s,2e3),(b=document.getElementById(f))==null||b.addEventListener("submit",l),(B=document.getElementById(d))==null||B.addEventListener("click",a),(I=document.getElementById(h))==null||I.addEventListener("click",a))}function $(){if(new URLSearchParams(window.location.search).has("no-cookie-banner"))return;const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/@finsweet/cookie-consent@1/fs-cc.js",n.setAttribute("fs-cc-domain",".listenalphabeats.com"),n.setAttribute("fs-cc-mode","opt-in"),n.async=!0;const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/gh/digital-sparks/cookie-consent-boost@1/dist/index.js",t.async=!0,document.head.appendChild(n),document.head.appendChild(t)}function G(){const o=C();if(o){U(o);return}setTimeout(()=>{d(),f(),r()},200);const n={annual:{price:149,strikedPrice:149},monthly:{price:15.99,strikedPrice:15.99},brainbit:{annual:{price:449,strikedPrice:449},monthly:{price:499,strikedPrice:499}}},t={annualButton:document.getElementById("plan-annual"),monthlyButton:document.getElementById("plan-monthly"),headbandYes:document.getElementById("headband-yes"),headbandNo:document.getElementById("headband-no"),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),annualFeatures:document.querySelectorAll(".annual-feature"),primaryButtonDesktop:document.getElementById("product-buy-primary-btn")};function h(i,e,s){if(!i)return;const c=i.querySelector(".price-strikethrough"),l=i.querySelector(".price");c&&(c.innerText="$"+e.toFixed(2),c.style.display=e===s?"none":"block"),l&&(l.innerText="$"+s.toFixed(2))}function d(){h(t.annualButton,n.annual.strikedPrice,n.annual.price),h(t.monthlyButton,n.monthly.strikedPrice,n.monthly.price),h(t.headbandYes,n.brainbit.annual.strikedPrice,n.brainbit.annual.price)}function f(){var S,T,N,O;const i=document.getElementById("discount-badge"),e=document.getElementById("discount-badge-title");function s(u){i==null||i.setAttribute("style","display: flex;"),e&&(e.textContent=u)}const c=k(L.RewardfulReferral),l=D(),a=Number(new URLSearchParams(l||"").get("percentOff")||0),m=Number(new URLSearchParams(l||"").get("amountOff")||0),b=((S=c==null?void 0:c.coupon)==null?void 0:S.percent_off)||0,B=((T=c==null?void 0:c.coupon)==null?void 0:T.amount_off)||0,I=n.annual.price*(a/100),y=n.annual.price*(b/100),E=Math.max(I,y,m,B);if(E===0)return;let p="";if(B===E)p=((N=c==null?void 0:c.coupon)==null?void 0:N.name)||"";else if(m===E)p=new URLSearchParams(l||"").get("discountName")||"",n.annual.price-=m,h(t.annualButton,n.annual.strikedPrice,n.annual.price);else{p=(a>b?new URLSearchParams(l||"").get("discountName"):(O=c==null?void 0:c.coupon)==null?void 0:O.name)||"Discount";const w=1-Math.max(a,b)/100;n.annual.price*=w,n.monthly.price*=w,n.brainbit.annual.price*=w,n.brainbit.monthly.price*=w,d()}s(p)}function r(){var E,p,S,T,N,O;const i=v()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up";let e="YEARLY",s="",c=!0;function l(u,w){u==null||u.classList[w?"add":"remove"]("active")}function a(u,w){u&&(u.style.display=w?"flex":"none")}function m(){let u=`${i}?plan=${e}`;const w=D();w&&e==="YEARLY"&&(u+=`&${w}`),s&&(u+=`&paymentProvider=${s}`),c||(u+="&includeBrainbit=false"),t.primaryButtonDesktop&&(t.primaryButtonDesktop.href=u)}function b(u){e=u?"YEARLY":"MONTHLY",l(t.annualButton,u),l(t.monthlyButton,!u),t.annualFeatures.forEach(w=>a(w,u&&(w!==t.paymentKlarna||c))),I(),u?h(t.headbandYes,n.brainbit.annual.strikedPrice,n.brainbit.annual.price):h(t.headbandYes,n.brainbit.monthly.strikedPrice,n.brainbit.monthly.price)}function B(u){c=u,l(t.headbandYes,u),l(t.headbandNo,!u),t.paymentKlarna&&a(t.paymentKlarna,u&&e!=="MONTHLY"),I()}function I(){s="",l(t.paymentUpfront,!0),l(t.paymentKlarna,!1),m()}function y(){s="klarna",l(t.paymentUpfront,!1),l(t.paymentKlarna,!0),m()}(E=t.annualButton)==null||E.addEventListener("click",()=>b(!0)),(p=t.monthlyButton)==null||p.addEventListener("click",()=>b(!1)),(S=t.headbandYes)==null||S.addEventListener("click",()=>B(!0)),(T=t.headbandNo)==null||T.addEventListener("click",()=>B(!1)),(N=t.paymentUpfront)==null||N.addEventListener("click",I),(O=t.paymentKlarna)==null||O.addEventListener("click",y),m()}}function q(){const o=C();if(o){U(o);return}setTimeout(()=>{h()},200);const n={[P.SUBSCRIPTION_ONLY]:{discountName:"Black Friday discount",couponId:v()?"D3mgjtkT":"aWmdtFSD",amountOff:"70",ctaTitle:"Order now"},[P.MUSE]:{discountName:"Black Friday discount",couponId:v()?"9oEGjT70":"hryuMkbo",amountOff:"200",ctaTitle:"Pre-order now"},[P.BRAINBIT]:{discountName:"Black Friday discount",couponId:v()?"OjjWjGvV":"2oEzwWNL",amountOff:"199",ctaTitle:"Order now"}},t={subscriptionOnly:document.getElementById(P.SUBSCRIPTION_ONLY),bundleMuse:document.getElementById("bundle-"+P.MUSE),bundleBrainbit:document.getElementById("bundle-"+P.BRAINBIT),paymentUpfront:document.getElementById("payment-upfront"),paymentKlarna:document.getElementById("payment-klarna"),shippingMuse:document.getElementById("shipping-"+P.MUSE),shippingBrainbit:document.getElementById("shipping-"+P.BRAINBIT),primaryBuyButton:document.getElementById("product-buy-primary-btn")};function h(){var b,B,I,y,E;let d=P.SUBSCRIPTION_ONLY,f="";function r(p,S){p==null||p.classList[S?"add":"remove"]("active")}function i(p,S){p&&(p.style.display=S?"flex":"none")}function e(){const p=v()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up",S=new URLSearchParams([["bundleType",d],["discountName",n[d].discountName],["amountOff",n[d].amountOff],["couponId",n[d].couponId]]);f&&S.append("paymentProvider",f),t.primaryBuyButton&&(t.primaryBuyButton.href=`${p}?${S}`,t.primaryBuyButton.innerText=n[d].ctaTitle)}function s(){d=P.SUBSCRIPTION_ONLY,f="",i(t.paymentKlarna,!1),a(),i(t.shippingMuse,!1),i(t.shippingBrainbit,!1),r(t.subscriptionOnly,!0),r(t.bundleBrainbit,!1),r(t.bundleMuse,!1),e()}function c(){d=P.MUSE,i(t.paymentKlarna,!0),i(t.shippingMuse,!0),i(t.shippingBrainbit,!1),r(t.subscriptionOnly,!1),r(t.bundleBrainbit,!1),r(t.bundleMuse,!0),e()}function l(){d=P.BRAINBIT,i(t.paymentKlarna,!0),i(t.shippingMuse,!1),i(t.shippingBrainbit,!0),r(t.subscriptionOnly,!1),r(t.bundleBrainbit,!0),r(t.bundleMuse,!1),e()}function a(){f="",r(t.paymentUpfront,!0),r(t.paymentKlarna,!1),e()}function m(){f="klarna",r(t.paymentUpfront,!1),r(t.paymentKlarna,!0),e()}(b=t.subscriptionOnly)==null||b.addEventListener("click",s),(B=t.bundleMuse)==null||B.addEventListener("click",c),(I=t.bundleBrainbit)==null||I.addEventListener("click",l),(y=t.paymentUpfront)==null||y.addEventListener("click",a),(E=t.paymentKlarna)==null||E.addEventListener("click",m),e()}}function W(){const o={amaze:{discountName:"Amaze Creator Bundle discount",couponId:v()?"YiM3PNXT":"Gu2jGXBe",amountOff:"199"},usat:{discountName:"USAT 15% Off",couponId:v()?"YcvRrNe2":"9xjBd0Rf",percentOff:"15"}};if(!window.location.pathname.includes(`/${A}/`))return;const n=document.querySelectorAll("#payment-upfront"),t=document.querySelectorAll("#payment-klarna"),h=document.querySelectorAll("#product-buy-primary-btn");function d(){const a=window.location.pathname.split(`/${A}/`)[1];if(a)return K(a),a}function f(a,m){a==null||a.classList[m?"add":"remove"]("active")}const r=d();if(!r||!o[r])return;const i=o[r];let e="";function s(){if(!r||!o[r])return;const a=v()?"https://accounts.development.listenalphabeats.nl/sign-up":"https://accounts.listenalphabeats.com/sign-up",m=new URLSearchParams([["partner",r],["couponId",i.couponId],["discountName",i.discountName]]);i.amountOff?m.append("amountOff",i.amountOff):i.percentOff&&m.append("percentOff",i.percentOff),e&&m.append("paymentProvider",e),h.forEach(b=>b.href=`${a}?${m}`)}function c(){e="",n.forEach(a=>f(a,!0)),t.forEach(a=>f(a,!1)),s()}function l(){e="klarna",n.forEach(a=>f(a,!1)),t.forEach(a=>f(a,!0)),s()}n.forEach(a=>a.addEventListener("click",c)),t.forEach(a=>a.addEventListener("click",l)),s()}return $(),F(),document.addEventListener("DOMContentLoaded",()=>{C()}),g.NEWSLETTER_DISCOUNT_PARAMS_STORAGE_ID=R,g.PARTNERS_PATH=A,g.conditionalCookieBanner=$,g.getCookie=k,g.getNewsletterDiscountParams=D,g.getPartnerNameInStorage=C,g.guardCioFormsWithRecaptcha=F,g.handleCartBlackFriday=q,g.handleCartWithDiscount=G,g.handleNewsletterDiscountPopup=j,g.handlePartnerLanding=W,g.isGooglebot=_,g.isStaging=v,g.redirectToPartnerPage=U,g.runAfterConsentResolved=Y,g.safeDecodeURIComponent=M,g.setPartnerNameInStorage=K,Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),g}({});
