<script>
  // auto rotating tabs
  var Webflow = Webflow || [];

  Webflow.push(function () {
    var tabTimeout;

    function tabLoop() {
      tabTimeout = setTimeout(function () {
        var $next = $('.tabs-vertical_menu').children('.w--current:first').next();
        if ($next.length) {
          if ($(".menu-button").hasClass("w--open")) {
            tabLoop();
          } else {
            $next.removeAttr("href").click();
          }
        } else {
          if ($(".menu-button").hasClass("w--open")) {
            tabLoop();
          } else {
            $('.tabs-vertical_tab-link:first').removeAttr("href").click();
          }
        }
      }, 10000); // 10 seconds
    }

    $('.tabs-vertical_tab-link').click(function () {
      clearTimeout(tabTimeout);
      tabLoop();
    });

    // Intersection Observer to trigger tabLoop when section is in view
    var observer = new IntersectionObserver(function (entries) {
      if (entries[0].isIntersecting) {
        clearTimeout(tabTimeout); // Ensure no duplicate timers
        tabLoop(); // Start auto-rotation when section is in view
        observer.unobserve(entries[0].target); // Stop observing after it runs once
      }
    }, {
      threshold: 0.5 // Adjust this threshold based on when you want the animation to start
    });

    // Start observing the section containing the tabs
    observer.observe(document.querySelector('.section_tabs'));
  });
</script>

<script>
  var Webflow = Webflow || [];
  Webflow.push(function () {
    const productThumbnails = new Swiper(".product-thumb-small_container", {
      wrapperClass: "product-thumb-small_wrapper",
      slideClass: "product-thumb-small_slide",
      slidesPerView: "auto",
      direction: "horizontal",
      spaceBetween: 0,
    });

    const productSwiperEl = document.querySelector(
      ".swiper-navigation_component.is-product-thumbnail"
    );

    const productImages = new Swiper(".product-thumb-large_container", {
      wrapperClass: "product-thumb-large_wrapper",
      slideClass: "product-thumb-large_slide",
      loop: true,
      slidesPerView: 1,
      direction: "horizontal",
      spaceBetween: 0,
      effect: "fade",
      autoHeight: true,
      grabCursor: true,
      keyboard: {
        enabled: true,
        onlyInViewport: true,
      },
      thumbs: {
        swiper: productThumbnails,
        slideThumbActiveClass: "is-active",
      },
      pagination: {
        el: productSwiperEl.querySelector(".swiper-pagination"),
        bulletClass: "swiper-pagination_bullet",
        bulletActiveClass: "is-active",
        clickable: true,
        dynamicBullets: false,
      },
      navigation: {
        nextEl: productSwiperEl.querySelector("[data-action=next-slide]"),
        prevEl: productSwiperEl.querySelector("[data-action=prev-slide]"),
      },
    });
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (window.location.host === 'staging-alphabeats.webflow.io') {
      ab?.handleCartBlackFriday?.();
    } else {
      ab?.handleCartWithDiscount?.();
    }
  }); 
</script>

<!-- Hide `Buy now` button on /product page -->
<style>
  #navbar-primary-btn {
    display: none;
  }
</style>